"use strict";(self.webpackChunkuwb_client_app=self.webpackChunkuwb_client_app||[]).push([[753],{5753:(j,r,n)=>{n.r(r),n.d(r,{NotificationsModule:()=>w});var c=n(6106),d=n(6208),h=n(2125),t=n(9291),f=n(5083),u=n(5032),m=n(9862);let p=(()=>{class o{constructor(e){this.http=e,this.resourceUrl=u.d+"notification-archive"}findAll(){return this.http.get(this.resourceUrl)}findAllByDates(e,i){return this.http.get(`${this.resourceUrl}/${e}/${i}`,{observe:"response"})}findById(e){return this.http.get(`${this.resourceUrl}/${e}`,{observe:"response"})}save(e){return this.http.post(this.resourceUrl,e,{observe:"response"})}update(e){return this.http.put(this.resourceUrl,e,{observe:"response"})}delete(e){return this.http.get(`${this.resourceUrl}/${e}`,{observe:"response"})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(m.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var g=n(5374),v=n(9935),b=n(4089),N=n(1382),C=n(641),A=n(9496),F=n(3999);const S=[{path:"notifications",component:(()=>{class o{constructor(e,i,s,a){this.columnService=e,this.notificationsService=i,this.objectsService=s,this.areasService=a,this.columns=[],this.notifications=[],this.handleNotifications=[],this.dropdownFilterObjectItems=[],this.dropdownFilterAreaItems=[],this.selectedRangeDate=[],this.loading=!1}ngOnInit(){this.columns=this.columnService.getNotificationColumns(),this.loadObjects(),this.loadAreas()}loadObjects(){this.objectsService.findAll().subscribe(e=>{this.dropdownFilterObjectItems=e.body??[]})}loadAreas(){this.areasService.findAll().subscribe(e=>{this.dropdownFilterAreaItems=e.body??[]})}loadNotifications(){this.loading=!0,this.notificationsService.findAllByDates(this.selectedRangeDate[0],this.selectedRangeDate[1]).subscribe({next:s=>{this.notifications=s.body??[],this.handleNotifications=this.notifications,this.loading=!1},error:s=>{this.notifications=[],this.loading=!1}})}onNotificationSelect(e){this.selectedNotification=e??void 0}onDateChange(e){this.selectedRangeDate=e}onObjectFilterSelected(e){this.notifications=e?this.handleNotifications.filter(i=>i.objectFullName?.includes(e.fullName)):this.handleNotifications}onAreaFilterSelected(e){this.notifications=e?this.handleNotifications.filter(i=>i.areaName?.includes(e.name)):this.handleNotifications}checkIsAllValid(){return 2===this.selectedRangeDate.length&&void 0!==this.selectedRangeDate[1]}onLoadNotifications(){this.loadNotifications()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.w),t.Y36(p),t.Y36(g.h),t.Y36(v.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["uwb-notifications"]],decls:11,vars:17,consts:[[1,"single_table_with_navbar"],[1,"grid","align-items-center"],[1,"col-10","flex","justify-content-center",3,"rangeMode","showTime","modelChange"],[1,"col-2","flex","justify-content-center","align-items-end",2,"height","80px"],["icon","pi pi-search",3,"disabled","onClick"],[3,"columns","values","loading","showFilterOption","selectionChange"],["filter","",1,"w-11rem","m-2"],[3,"items","optionLabel","label","modelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"uwb-calendar",2),t.NdJ("modelChange",function(a){return i.onDateChange(a)}),t.qZA(),t.TgZ(3,"div",3)(4,"p-button",4),t.NdJ("onClick",function(){return i.onLoadNotifications()}),t.qZA()()(),t.TgZ(5,"uwb-table",5),t.NdJ("selectionChange",function(a){return i.onNotificationSelect(a)}),t.TgZ(6,"div",6)(7,"uwb-single-select",7),t.NdJ("modelChange",function(a){return i.onObjectFilterSelected(a)}),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"uwb-single-select",7),t.NdJ("modelChange",function(a){return i.onAreaFilterSelected(a)}),t.ALo(10,"translate"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("rangeMode",!0)("showTime",!0),t.xp6(2),t.Q6J("disabled",!i.checkIsAllValid()),t.xp6(1),t.Q6J("columns",i.columns)("values",i.notifications)("loading",i.loading)("showFilterOption",!0),t.xp6(2),t.s9C("label",t.lcZ(8,13,"object.objects")),t.Q6J("items",i.dropdownFilterObjectItems)("optionLabel","fullName"),t.xp6(2),t.s9C("label",t.lcZ(10,15,"area.areas")),t.Q6J("items",i.dropdownFilterAreaItems)("optionLabel","name"))},dependencies:[b.zx,N.q,C.g,A.EC,F.X$]}),o})()}];let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.K,d.m,h.Bz.forChild(S)]}),o})()}}]);