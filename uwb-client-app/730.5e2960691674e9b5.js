"use strict";(self.webpackChunkuwb_client_app=self.webpackChunkuwb_client_app||[]).push([[730],{7397:(U,v,l)=>{l.d(v,{s:()=>T});var n=l(9291),g=l(6223),C=l(3562),e=l(2420),A=l(9972),w=l(737),f=l(6814);function z(r,_){if(1&r){const a=n.EpF();n.TgZ(0,"div",5)(1,"div",6)(2,"input",7),n.NdJ("ngModelChange",function(u){n.CHM(a);const h=n.oxw();return n.KtG(h.filterText=u)})("input",function(u){n.CHM(a);const h=n.oxw();return n.KtG(h.customFilter(u))}),n.qZA(),n._UZ(3,"i",8),n.qZA()()}if(2&r){const a=n.oxw();n.xp6(2),n.Q6J("ngModel",a.filterText)}}function M(r,_){if(1&r&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&r){const a=n.oxw().$implicit,c=n.oxw();n.xp6(1),n.hij(" ",null==a?null:a.data[c.optionLabel]," ")}}function P(r,_){if(1&r&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&r){const a=n.oxw(2);n.xp6(1),n.hij(" ",a.placeholder," ")}}function S(r,_){if(1&r&&(n.YNc(0,M,2,1,"span",9),n.YNc(1,P,2,1,"span",9)),2&r){const a=_.$implicit,c=n.oxw();n.Q6J("ngIf",null==a?null:a.data),n.xp6(1),n.Q6J("ngIf",!(null!=a&&a.data||c.floatLabel))}}function y(r,_){if(1&r&&(n.TgZ(0,"span",10),n._uU(1),n.ALo(2,"slice"),n.qZA()),2&r){const a=_.$implicit,c=n.oxw();n.s9C("pTooltip",a.data[c.optionLabel]),n.xp6(1),n.hij(" ",a.data[c.optionLabel].length>30?n.Dn7(2,2,a.data[c.optionLabel],0,30)+"...":a.data[c.optionLabel]," ")}}function L(r,_){if(1&r&&(n.TgZ(0,"label",11),n._uU(1),n.qZA()),2&r){const a=n.oxw();n.xp6(1),n.Oqu(a.label)}}const x=function(){return{width:"100%"}};let T=(()=>{class r{constructor(){this.options=[],this.filter=!0,this.label="Wybierz opcje",this.optionLabel="name",this.styleClass="",this.selectionMode="single",this.floatLabel=!0,this.placeholder="",this.modelChange=new n.vpe,this.itemChange=new n.vpe,this.onModelChange=()=>e.Z,this.onModelTouched=()=>e.Z,this.handleOptions=[],this.filterText=""}ngOnChanges(a){a.options&&(this.handleOptions=this.options)}ngAfterViewInit(){this.treeSelect.registerOnChange(this.onModelChange),this.treeSelect.registerOnTouched(this.onModelTouched)}customFilter(a){const c=this.filterText.toLowerCase();""===c?this.options=this.handleOptions:(this.options=this.handleOptions,this.options=this.filterTree(this.options,c))}filterTree(a,c){const u=[];for(const h of a)if(h?.data&&h.data.name.toLowerCase().includes(c)&&!u.find(b=>b.data.id===h.data.id)&&u.push(h),h.children&&h.children.length>0){const b=this.filterTree(h.children,c);if(b.length>0&&!u.find(m=>m.data.id===h.data.id)){const m={...h};m.children=b,u.push(m)}}return u}writeValue(a){this.treeSelectValue=a}registerOnChange(a){this.onModelChange=a}registerOnTouched(a){this.onModelTouched=a}emitModelAndItemChange(a){this.modelChange.emit(a.node.data),this.emitItemChange({value:a.node.data})}emitItemChange(a){const c=a.value?this.options.find(u=>u?.[this.itemValue]===a.value):void 0;this.itemChange.emit(Object.assign({},a,{item:c??null}))}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["uwb-tree-select"]],viewQuery:function(a,c){if(1&a&&n.Gf(C.mP,7),2&a){let u;n.iGM(u=n.CRH())&&(c.treeSelect=u.first)}},inputs:{options:"options",filter:"filter",label:"label",optionLabel:"optionLabel",treeSelectValue:"treeSelectValue",itemValue:"itemValue",styleClass:"styleClass",selectionMode:"selectionMode",floatLabel:"floatLabel",placeholder:"placeholder"},outputs:{modelChange:"modelChange",itemChange:"itemChange"},features:[n._Bn([{provide:g.JU,useExisting:(0,n.Gpc)(()=>r),multi:!0}]),n.TTD],decls:6,vars:12,consts:[["placeholder","","appendTo","body",3,"ngModel","options","placeholder","selectionMode","ngModelChange","onNodeSelect"],["pTemplate","header"],["pTemplate","value"],["pTemplate","default"],["for","label",4,"ngIf"],[1,"p-treeselect-header"],[1,"p-treeselect-filter-container","p-input-icon-right","custom-filter"],["type","text","autofocus","","placeholder","Filter",1,"p-treeselect-filter","p-inputtext","p-component",3,"ngModel","ngModelChange","input"],[1,"pi","pi-search"],[4,"ngIf"],[3,"pTooltip"],["for","label"]],template:function(a,c){1&a&&(n.TgZ(0,"span")(1,"p-treeSelect",0),n.NdJ("ngModelChange",function(h){return c.treeSelectValue=h})("onNodeSelect",function(h){return c.emitModelAndItemChange(h)}),n.YNc(2,z,4,1,"ng-template",1),n.YNc(3,S,2,2,"ng-template",2),n.YNc(4,y,3,6,"ng-template",3),n.qZA(),n.YNc(5,L,2,1,"label",4),n.qZA()),2&a&&(n.Tol(c.floatLabel?"p-float-label":""),n.xp6(1),n.Akn(n.DdM(11,x)),n.Tol(c.styleClass),n.Q6J("ngModel",c.treeSelectValue)("options",c.options)("placeholder",c.placeholder)("selectionMode",c.selectionMode),n.xp6(4),n.Q6J("ngIf",c.floatLabel))},dependencies:[A.jx,w.u,C.mP,g.Fj,g.JJ,g.On,f.O5,f.OU],styles:[".p-inputtext.ng-valid[_ngcontent-%COMP%]{border-left:none;border:1px solid #ced4da}  .p-treeselect .p-treeselect-label span{color:#000}  .p-treeselect-items-wrapper::-webkit-scrollbar{width:12px}  .p-treeselect-items-wrapper::-webkit-scrollbar-thumb{border-radius:.5rem;background:var(--uwb-menu-scrollbar-thumb)}  .p-treeselect-items-wrapper::-webkit-scrollbar-thumb:hover{background:var(--uwb-menu-scrollbar-thumb-hover)}  .p-treeselect-items-wrapper::-webkit-scrollbar-track{background:var(--uwb-menu-scrollbar-track);background-color:transparent}"]}),r})()},5730:(U,v,l)=>{l.r(v),l.d(v,{LocalizationsArchiveModule:()=>$});var n=l(6106),g=l(6208),C=l(2125),e=l(9291),A=l(8892),w=l(2894),f=l(5374),z=l(401),M=l(6641),P=l(1407),S=l(1321),y=l(9185),L=l(9972),x=l(737),T=l(4089),r=l(1382),_=l(641),a=l(4112),c=l(6093),u=l(3822),h=l(4595),b=l(3703),m=l(6814),I=l(9061),Z=l(3999);function O(i,p){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",5),e.qZA()),2&i){const t=e.oxw();e.Tol(t.styleClass)}}function k(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"p-button",11),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw(3);return e.KtG(s.onDrawClick())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.disabledMapButtons)("icon",t.mobileScreen?"pi pi-palette":"")("styleClass",t.mobileScreen?"ui-button_size_100":"ui-button_size_125")("label",t.mobileScreen?"":e.lcZ(1,4,"global.buttons.draw"))}}function B(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"p-button",11),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw(3);return e.KtG(s.onModifyClick())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.disabledMapButtons)("icon",t.mobileScreen?"pi pi-pencil":"")("styleClass",t.mobileScreen?"ui-button_size_100":"ui-button_size_125")("label",t.mobileScreen?"":e.lcZ(1,4,"global.buttons.edit"))}}function N(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,k,2,6,"p-button",10),e.YNc(2,B,2,6,"p-button",10),e.TgZ(3,"p-button",11),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.deleteVertex())}),e.ALo(4,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===t.vertexes.length),e.xp6(1),e.Q6J("ngIf",t.vertexes.length>0),e.xp6(1),e.Q6J("disabled",t.disabledMapButtons)("icon",t.mobileScreen?"pi pi-trash":"")("styleClass",t.mobileScreen?"ui-button_size_100":"ui-button_size_125")("label",t.mobileScreen?"":e.lcZ(4,6,"global.buttons.clear"))}}function J(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"p-button",12),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.saveVertex())}),e.ALo(1,"translate"),e.qZA(),e.TgZ(2,"p-button",13),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.loadVertexes())}),e.ALo(3,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"global.buttons.save")),e.Q6J("disabled",t.disabledMapButtons),e.xp6(2),e.s9C("label",e.lcZ(3,5,"global.buttons.cancel"))}}function E(i,p){if(1&i&&(e.TgZ(0,"div",6),e._UZ(1,"div",5),e.TgZ(2,"div",7),e.YNc(3,N,5,8,"div",8),e.YNc(4,J,4,7,"ng-template",null,9,e.W1O),e.qZA()()),2&i){const t=e.MAs(5),o=e.oxw();e.xp6(3),e.Q6J("ngIf",!1===o.modified&&!1===o.drawable)("ngIfElse",t)}}function D(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"uwb-map-panel",15),e.NdJ("emitPreviousClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.goToPreviousPoint())})("emitNextClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.goToNextPoint())})("emitPlayClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.goToNextPointAutomatic())})("emitPauseClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.stopGoToNextPointAutomatic())})("emitTimeToChangePoint",function(s){e.CHM(t);const d=e.oxw(2);return e.KtG(d.onTimeToChangePointChenge(s))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabledButtons",t.disabledMapPanelButtons)}}function Q(i,p){if(1&i&&(e.TgZ(0,"div")(1,"div",5),e.YNc(2,D,1,1,"uwb-map-panel",14),e.qZA()()),2&i){const t=e.oxw();e.Tol(t.styleClass),e.xp6(2),e.Q6J("ngIf",t.background&&""!==t.background)}}function j(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"p-button",20),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw(3);return e.KtG(s.emitEditSelectedPoint.emit(s.selectedMapPoint))}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"p-button",21),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw(3);return e.KtG(s.emitDeleteSelectedPoint.emit(s.selectedMapPoint))}),e.ALo(4,"translate"),e.qZA()()}2&i&&(e.xp6(1),e.s9C("pTooltip",e.lcZ(2,2,"global.buttons.edit")),e.xp6(2),e.s9C("pTooltip",e.lcZ(4,4,"global.buttons.delete")))}function Y(i,p){if(1&i&&(e.TgZ(0,"div",17)(1,"span",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",18),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",18),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span",18),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,j,5,6,"div",19),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE(" ",e.lcZ(3,9,"anchor.name"),": ",t.selectedMapPoint.name," "),e.xp6(3),e.AsE(" ",e.lcZ(6,11,"anchor.x"),": ",t.selectedMapPoint.x," "),e.xp6(3),e.AsE(" ",e.lcZ(9,13,"anchor.y"),": ",t.selectedMapPoint.y," "),e.xp6(3),e.AsE(" ",e.lcZ(12,15,"anchor.z"),": ",t.selectedMapPoint.z," "),e.xp6(2),e.Q6J("ngIf",t.showAnchorOverlayButtons)}}function K(i,p){if(1&i&&(e.ynx(0),e.YNc(1,Y,14,17,"div",16),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selectedMapPoint&&t.showOverlay)}}function R(i,p){if(1&i&&(e.TgZ(0,"div",17)(1,"span",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",18),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",18),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span",18),e._uU(11),e.ALo(12,"translate"),e.ALo(13,"date"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE(" ",e.lcZ(3,8,"localization.tag.name"),": ",t.selectedMapPoint.name," "),e.xp6(3),e.AsE(" ",e.lcZ(6,10,"localization.tag.x"),": ",t.selectedMapPoint.x," "),e.xp6(3),e.AsE(" ",e.lcZ(9,12,"localization.tag.y"),": ",t.selectedMapPoint.y," "),e.xp6(3),e.AsE(" ",e.lcZ(12,14,"localization.tag.date"),": ",e.xi3(13,16,t.selectedMapPoint.date,"yyyy-M-dd, HH:mm:ss")," ")}}function F(i,p){if(1&i&&(e.ynx(0),e.YNc(1,R,14,19,"div",16),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selectedMapPoint)}}let G=(()=>{class i extends a.G{constructor(t,o){super(t,o),this.cd=t,this.renderer=o,this.localizations=[],this.timeToChangePoint=2,this.isPlay=!1}ngOnInit(){this.overlayType=b.L.TAG,this.disabledMapPanelButtons=!0}ngOnChanges(t){t.background&&""!==this.background&&this.loadMap(),t.localizations&&(this.source.clear(),this.localizations.length>0?(this.disabledMapPanelButtons=!1,this.loadPoints(h.u)):this.disabledMapPanelButtons=!0)}ngOnDestroy(){clearInterval(this.localizationArchiveInterval)}loadPoints(t){this.selectedMapPoint=void 0;const o=this.localizations[0];this.selectedMapPoint=o,this.currentPointIndex=0,this.localizationArchivePointStyle=new c.ZP({image:new u.Z({src:o.fullPath,scale:.07,anchor:[.5,1]}),zIndex:100}),this.addPointToMap([o.xPx,o.yPx],"tag_"+o.tagId,this.localizationArchivePointStyle),this.setOverlay([o.xPx,o.yPx]),this.source.changed()}goToPreviousPoint(){this.removePointFromMap("tag_"+this.localizations[this.currentPointIndex].tagId),this.currentPointIndex=this.currentPointIndex-1<0?this.localizations.length-1:this.currentPointIndex-1;const t=this.localizations[this.currentPointIndex];this.selectedMapPoint=t,this.addPointToMap([t.xPx,t.yPx],"tag_"+t.tagId,this.localizationArchivePointStyle),this.setOverlay([t.xPx,t.yPx])}goToNextPoint(){this.removePointFromMap("tag_"+this.localizations[this.currentPointIndex].tagId),this.currentPointIndex=this.currentPointIndex+1>this.localizations.length-1?0:this.currentPointIndex+1;const t=this.localizations[this.currentPointIndex];this.selectedMapPoint=t,this.addPointToMap([t.xPx,t.yPx],"tag_"+t.tagId,this.localizationArchivePointStyle),this.setOverlay([t.xPx,t.yPx])}goToNextPointAutomatic(){this.localizationArchiveInterval=setInterval(()=>{this.goToNextPoint()},1e3*this.timeToChangePoint)}stopGoToNextPointAutomatic(){clearInterval(this.localizationArchiveInterval),this.localizationArchiveInterval=void 0}onTimeToChangePointChenge(t){this.timeToChangePoint=t,this.localizationArchiveInterval&&(clearInterval(this.localizationArchiveInterval),this.goToNextPointAutomatic())}setOverlay(t){this.overlay.setPosition(t),this.cd.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(e.Qsj))},i.\u0275cmp=e.Xpm({type:i,selectors:[["uwb-map-localizations-archive"]],inputs:{localizations:"localizations"},features:[e.qOj,e.TTD],decls:8,vars:7,consts:[[3,"ngSwitch"],[3,"class",4,"ngSwitchCase"],["class","single_map_with_footer",4,"ngSwitchCase"],["id","popup",1,"overlay"],[4,"ngSwitchCase"],["id","map",1,"map"],[1,"single_map_with_footer"],[1,"buttons_container_center"],[4,"ngIf","ngIfElse"],["saveTemplate",""],["class","px-2",3,"disabled","icon","styleClass","label","onClick",4,"ngIf"],[1,"px-2",3,"disabled","icon","styleClass","label","onClick"],["styleClass","ui-button_size_125",1,"px-2",3,"disabled","label","onClick"],["styleClass","ui-button_size_125","type","button","data-dismiss","modal",3,"label","onClick"],[3,"disabledButtons","emitPreviousClick","emitNextClick","emitPlayClick","emitPauseClick","emitTimeToChangePoint",4,"ngIf"],[3,"disabledButtons","emitPreviousClick","emitNextClick","emitPlayClick","emitPauseClick","emitTimeToChangePoint"],["class","flex flex-column",4,"ngIf"],[1,"flex","flex-column"],[1,"p-1"],["class","buttons_container_center",4,"ngIf"],["styleClass","ui-button_size_125","icon","pi pi-pencil",1,"p-2",3,"pTooltip","onClick"],["styleClass","ui-button_size_125","icon","pi pi-times",1,"p-2",3,"pTooltip","onClick"]],template:function(t,o){1&t&&(e.ynx(0,0),e.YNc(1,O,2,2,"div",1),e.YNc(2,E,6,2,"div",2),e.YNc(3,Q,3,3,"div",1),e.BQk(),e.TgZ(4,"div",3),e.ynx(5,0),e.YNc(6,K,2,1,"ng-container",4),e.YNc(7,F,2,1,"ng-container",4),e.BQk(),e.qZA()),2&t&&(e.Q6J("ngSwitch",o.mapDisplayType),e.xp6(1),e.Q6J("ngSwitchCase","normal"),e.xp6(1),e.Q6J("ngSwitchCase","mapWithButtons"),e.xp6(1),e.Q6J("ngSwitchCase","mapWithBodyInside"),e.xp6(2),e.Q6J("ngSwitch",o.overlayType),e.xp6(1),e.Q6J("ngSwitchCase","anchor"),e.xp6(1),e.Q6J("ngSwitchCase","tag"))},dependencies:[x.u,T.zx,m.O5,m.RF,m.n9,I.Z,m.uU,Z.X$],styles:[".map[_ngcontent-%COMP%]{width:100%;height:100%;border:2px solid var(--uwb-primary);border-radius:15px}  .ol-control{display:flex}  .ol-control button{background-color:var(--uwb-button-background);color:var(--uwb-button-text-color);height:30px;width:30px;border-radius:15px}.overlay[_ngcontent-%COMP%]{background:var(--uwb-background);color:var(--uwb-internal-tab-font-color);border:0 none;border-radius:var(--border-radius);box-shadow:0 1px 3px #0000004d;padding:10px;position:absolute}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}  .ol-zoom{right:.5rem;left:auto}"]}),i})();var H=l(7397);function V(i,p){if(1&i&&(e.TgZ(0,"div",11),e._UZ(1,"img",12),e._uU(2),e.qZA()),2&i){const t=p.item;e.s9C("pTooltip",t.name),e.xp6(1),e.Q6J("src",t.path,e.LSH),e.xp6(1),e.hij(" ",t.name," ")}}const W=[{path:"localizations-archive",component:(()=>{class i{constructor(t,o,s,d,q,X,ee,te){this.backgroundsService=t,this.localizationsArchiveService=o,this.objectsService=s,this.dateService=d,this.authorityService=q,this.arrayBufferService=X,this.clientsService=ee,this.sizeScreenService=te,this.treeSelectItems=[],this.backgrounds=[],this.localizations=[],this.objects=[],this.selectedRangeDate=[],this.handleSelectedRangeDate=[],this.smallScreen=!1}ngOnInit(){this.sizeScreenService.smallScreen$.subscribe(t=>{this.smallScreen=t}),this.userOrganizationUnitId=this.authorityService.getUserOrganizationUnitId(),this.loadOrganizationUnits(),this.loadBackgrounds()}loadOrganizationUnits(){this.clientsService.findTree().subscribe(t=>{this.treeSelectItems=t.body??[],this.treeSelectItemSelected=this.clientsService.findByIdFromUnits(this.treeSelectItems[0],this.userOrganizationUnitId),this.selectedOrganizationUnit=this.treeSelectItemSelected.data})}loadBackgrounds(){this.backgroundsService.findAllByUserOrganizationUnit(this.userOrganizationUnitId).subscribe(t=>{this.backgrounds=t.body??[],this.backgrounds.forEach(o=>o.fullPath=this.arrayBufferService.convertImage(o.pathArrayBuffer))})}loadObjects(){this.objectsService.findAllByUserOrganizationUnit(this.userOrganizationUnitId).subscribe(t=>{this.objects=t.body??[]})}loadLocalizationsData(){const t=this.selectedRangeDate[0],o=this.selectedRangeDate[1];this.localizationsArchiveService.findAllByTagIdAndDateBetween(this.selectedObject?.hexTagId,t,o).subscribe(s=>{this.localizations=s.body??[],this.localizations.forEach(d=>{d.name=this.selectedObject?.name+" "+this.selectedObject?.secondName,d.xPx=this.selectedBackground?.scale?d.x*this.selectedBackground?.scale:d.x,d.yPx=this.selectedBackground?.scale?d.y*this.selectedBackground?.scale:d.y,d.fullPath=this.arrayBufferService.convertImage(d.pathArrayBuffer)})})}onOrganizationUnitSelect(t){this.selectedOrganizationUnit?.id!==t.id&&(this.selectedOrganizationUnit=t,this.treeSelectItemSelected=this.clientsService.findByIdFromUnits(this.treeSelectItems[0],this.selectedOrganizationUnit.id),this.selectedBackground=void 0,this.loadBackgrounds())}onBackgroundSelect(t){this.selectedBackground=t,this.selectedBackground?this.loadObjects():this.objects=[]}onObjectSelect(t){this.selectedObject=t}onDateChange(t){this.selectedRangeDate=t}checkIsAllValid(){return this.selectedBackground&&this.selectedObject&&2===this.selectedRangeDate.length}onLoadLocalizationsArchive(){(this.handleSelectedObject?.id!==this.selectedObject?.id||this.selectedRangeDate[0]!==this.handleSelectedRangeDate[0]||this.selectedRangeDate[1]!==this.handleSelectedRangeDate[1])&&(this.loadLocalizationsData(),this.handleSelectedObject=this.selectedObject,this.handleSelectedRangeDate={...this.selectedRangeDate})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(A.s),e.Y36(w.d),e.Y36(f.h),e.Y36(z.R),e.Y36(M.g),e.Y36(P.A),e.Y36(S.a),e.Y36(y.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-localizations-archive"]],decls:14,vars:35,consts:[[1,"h-full"],[1,"grid"],[1,"col-12",3,"treeSelectValue","options","optionLabel","floatLabel","placeholder","modelChange"],["optionLabel","name",3,"items","label","itemTemplate","modelChange"],["pTemplate","item"],["itemTemplate",""],[1,"pt-0","px-1","flex","justify-content-center",3,"rangeMode","showTime","modelChange"],["optionLabel","name",3,"showClear","items","label","modelChange"],[1,"flex","justify-content-center","align-items-end",2,"height","80px"],["icon","pi pi-search",3,"disabled","onClick"],[3,"background","localizations","mapDisplayType"],[1,"flex","align-items-center",3,"pTooltip"],[2,"height","30px",3,"src"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"uwb-tree-select",2),e.NdJ("modelChange",function(d){return o.onOrganizationUnitSelect(d)}),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"uwb-single-select",3),e.NdJ("modelChange",function(d){return o.onBackgroundSelect(d)}),e.ALo(5,"translate"),e.YNc(6,V,3,3,"ng-template",4,5,e.W1O),e.qZA(),e.TgZ(8,"uwb-calendar",6),e.NdJ("modelChange",function(d){return o.onDateChange(d)}),e.qZA(),e.TgZ(9,"uwb-single-select",7),e.NdJ("modelChange",function(d){return o.onObjectSelect(d)}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",8)(12,"p-button",9),e.NdJ("onClick",function(){return o.onLoadLocalizationsArchive()}),e.qZA()()(),e._UZ(13,"uwb-map-localizations-archive",10),e.qZA()),2&t){const s=e.MAs(7);e.Tol(o.smallScreen?"single_map_with_hight_navbar_small_screen":"single_map_with_hight_navbar"),e.xp6(2),e.Tol(o.smallScreen?"m-0":"mt-1"),e.Q6J("treeSelectValue",o.treeSelectItemSelected)("options",o.treeSelectItems)("optionLabel","name")("floatLabel",!1)("placeholder",e.lcZ(3,29,"background.organizationUnit")),e.xp6(2),e.Tol(o.smallScreen?"col-12":"col pt-0 px-1"),e.s9C("label",e.lcZ(5,31,"localization.backgrounds")),e.Q6J("items",o.backgrounds)("itemTemplate",s),e.xp6(4),e.Tol(o.smallScreen?"col-12":"col-3"),e.Q6J("rangeMode",!0)("showTime",!0),e.xp6(1),e.Tol(o.smallScreen?"col-12":"col-4 pt-0 px-1"),e.s9C("label",e.lcZ(10,33,"localization.objects")),e.Q6J("showClear",!1)("items",o.objects),e.xp6(2),e.Tol(o.smallScreen?"col-12":"col-1 pt-0 px-1"),e.xp6(1),e.Q6J("disabled",!o.checkIsAllValid()),e.xp6(1),e.Q6J("background",null==o.selectedBackground?null:o.selectedBackground.fullPath)("localizations",o.localizations)("mapDisplayType","mapWithBodyInside")}},dependencies:[L.jx,x.u,T.zx,r.q,_.g,G,H.s,Z.X$],styles:[".localizations-archive-page[_ngcontent-%COMP%]{display:grid;grid-template-rows:calc(100vh - 150px) 75px}"]}),i})()}];let $=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[n.K,g.m,C.Bz.forChild(W)]}),i})()}}]);