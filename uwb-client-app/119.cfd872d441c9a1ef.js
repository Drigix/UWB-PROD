(self.webpackChunkuwb_client_app=self.webpackChunkuwb_client_app||[]).push([[119],{6069:(g,x,e)=>{"use strict";e.d(x,{j:()=>c});var f=e(9931),l=e(9291);const o=["op"],a=["*"];let c=(()=>{class n extends f.T{toogleOverlay(d){this.overlay?.toggle(d)}}return n.\u0275fac=function(){let i;return function(p){return(i||(i=l.n5z(n)))(p||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["uwb-overlay"]],viewQuery:function(d,p){if(1&d&&l.Gf(o,5),2&d){let t;l.iGM(t=l.CRH())&&(p.overlay=t.first)}},features:[l.qOj],ngContentSelectors:a,decls:3,vars:3,consts:[["appendTo","body",3,"showCloseIcon"],["op",""]],template:function(d,p){1&d&&(l.F$t(),l.TgZ(0,"p-overlayPanel",0,1),l.Hsn(2),l.qZA()),2&d&&(l.Akn(p.style),l.Q6J("showCloseIcon",!0))},dependencies:[f.T],encapsulation:2}),n})()},3119:(g,x,e)=>{"use strict";e.r(x),e.d(x,{LocalizationsModule:()=>yt});var f=e(6106),l=e(6208),o=e(2125),a=e(8645),c=e(9360),n=e(8251),i=e(4829),d=e(2420),t=e(9291),b=e(8892),C=e(5374),E=e(5592),O=e(8146),I=e.n(O),w=e(2829),u=e(9862);let T=(()=>{class U{constructor(m){this.http=m,this.resourceUrl="../../../assets/data/data-localization.json",this.websocketUrl="//localhost:8081/ws",this.listener=this.createListener()}findAll(){return this.http.get(this.resourceUrl)}connect(){this.connection=this.createConnection(),this.socket=new w(this.websocketUrl),this.stompClient=I().over(this.socket,{debug:!1}),this.stompClient.connect({},()=>{this.reconnectAttempt=0,this.connectedPromise("success")})}disconnect(){null!==this.stompClient&&(null!==this.connectedPromise?this.connection?.then(()=>{this.stompClient?.send("/app/stop/localizactions/tag"),this.stompClient?.disconnect(),this.stompClient=void 0}):(this.stompClient?.disconnect(),this.stompClient=void 0))}subscribe(m){this.connection?.then(()=>{this.stompClient?.send("/app/send/localizactions/tag",m.toString()),this.stompClient?.subscribe("/topic/localizactions/tag",M=>{this.listenerObserver.next(JSON.parse(M.body))})})}unsubscribe(){this.stompClient?.connected&&(this.stompClient?.send("/app/stop/localizactions/tag"),this.stompClient?.unsubscribe(""))}receive(){return this.listener}createListener(){return new E.y(m=>{this.listenerObserver=m})}createConnection(){return new Promise((m,M)=>this.connectedPromise=m)}}return U.\u0275fac=function(m){return new(m||U)(t.LFG(u.eN))},U.\u0275prov=t.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();var h=e(9222),v=e(1407),s=e(6641),r=e(9935),y=e(8458),S=e(9972),A=e(737),N=e(4089),j=e(641),k=e(9554),R=e(6069),P=e(4112),F=e(6093),J=e(3822),H=e(8983),X=e(1059),$=e(8648),tt=e(1095),V=e(902),Y=e(5311),et=e(3710),K=e(4595),_=e(3703),G=e(6814),nt=e(9061),q=e(3999);function ot(U,z){if(1&U&&(t.TgZ(0,"div"),t._UZ(1,"div",5),t.qZA()),2&U){const m=t.oxw();t.Tol(m.styleClass)}}function st(U,z){if(1&U){const m=t.EpF();t.TgZ(0,"p-button",11),t.NdJ("onClick",function(){t.CHM(m);const L=t.oxw(3);return t.KtG(L.onDrawClick())}),t.ALo(1,"translate"),t.qZA()}if(2&U){const m=t.oxw(3);t.Q6J("disabled",m.disabledMapButtons)("icon",m.mobileScreen?"pi pi-palette":"")("styleClass",m.mobileScreen?"ui-button_size_100":"ui-button_size_125")("label",m.mobileScreen?"":t.lcZ(1,4,"global.buttons.draw"))}}function it(U,z){if(1&U){const m=t.EpF();t.TgZ(0,"p-button",11),t.NdJ("onClick",function(){t.CHM(m);const L=t.oxw(3);return t.KtG(L.onModifyClick())}),t.ALo(1,"translate"),t.qZA()}if(2&U){const m=t.oxw(3);t.Q6J("disabled",m.disabledMapButtons)("icon",m.mobileScreen?"pi pi-pencil":"")("styleClass",m.mobileScreen?"ui-button_size_100":"ui-button_size_125")("label",m.mobileScreen?"":t.lcZ(1,4,"global.buttons.edit"))}}function rt(U,z){if(1&U){const m=t.EpF();t.TgZ(0,"div"),t.YNc(1,st,2,6,"p-button",10),t.YNc(2,it,2,6,"p-button",10),t.TgZ(3,"p-button",11),t.NdJ("onClick",function(){t.CHM(m);const L=t.oxw(2);return t.KtG(L.deleteVertex())}),t.ALo(4,"translate"),t.qZA()()}if(2&U){const m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0===m.vertexes.length),t.xp6(1),t.Q6J("ngIf",m.vertexes.length>0),t.xp6(1),t.Q6J("disabled",m.disabledMapButtons)("icon",m.mobileScreen?"pi pi-trash":"")("styleClass",m.mobileScreen?"ui-button_size_100":"ui-button_size_125")("label",m.mobileScreen?"":t.lcZ(4,6,"global.buttons.clear"))}}function at(U,z){if(1&U){const m=t.EpF();t.TgZ(0,"p-button",12),t.NdJ("onClick",function(){t.CHM(m);const L=t.oxw(2);return t.KtG(L.saveVertex())}),t.ALo(1,"translate"),t.qZA(),t.TgZ(2,"p-button",13),t.NdJ("onClick",function(){t.CHM(m);const L=t.oxw(2);return t.KtG(L.loadVertexes())}),t.ALo(3,"translate"),t.qZA()}if(2&U){const m=t.oxw(2);t.s9C("label",t.lcZ(1,3,"global.buttons.save")),t.Q6J("disabled",m.disabledMapButtons),t.xp6(2),t.s9C("label",t.lcZ(3,5,"global.buttons.cancel"))}}function lt(U,z){if(1&U&&(t.TgZ(0,"div",6),t._UZ(1,"div",5),t.TgZ(2,"div",7),t.YNc(3,rt,5,8,"div",8),t.YNc(4,at,4,7,"ng-template",null,9,t.W1O),t.qZA()()),2&U){const m=t.MAs(5),M=t.oxw();t.xp6(3),t.Q6J("ngIf",!1===M.modified&&!1===M.drawable)("ngIfElse",m)}}function ct(U,z){if(1&U){const m=t.EpF();t.TgZ(0,"uwb-map-panel",15),t.NdJ("emitPreviousClick",function(){t.CHM(m);const L=t.oxw(2);return t.KtG(L.goToPreviousPoint())})("emitNextClick",function(){t.CHM(m);const L=t.oxw(2);return t.KtG(L.goToNextPoint())})("emitPlayClick",function(){t.CHM(m);const L=t.oxw(2);return t.KtG(L.goToNextPointAutomatic())})("emitPauseClick",function(){t.CHM(m);const L=t.oxw(2);return t.KtG(L.stopGoToNextPointAutomatic())})("emitTimeToChangePoint",function(L){t.CHM(m);const B=t.oxw(2);return t.KtG(B.onTimeToChangePointChenge(L))}),t.qZA()}if(2&U){const m=t.oxw(2);t.Q6J("disabledButtons",m.disabledMapPanelButtons)}}function ut(U,z){if(1&U&&(t.TgZ(0,"div")(1,"div",5),t.YNc(2,ct,1,1,"uwb-map-panel",14),t.qZA()()),2&U){const m=t.oxw();t.Tol(m.styleClass),t.xp6(2),t.Q6J("ngIf",m.background&&""!==m.background)}}function ht(U,z){if(1&U){const m=t.EpF();t.TgZ(0,"div",7)(1,"p-button",20),t.NdJ("onClick",function(){t.CHM(m);const L=t.oxw(3);return t.KtG(L.emitEditSelectedPoint.emit(L.selectedMapPoint))}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"p-button",21),t.NdJ("onClick",function(){t.CHM(m);const L=t.oxw(3);return t.KtG(L.emitDeleteSelectedPoint.emit(L.selectedMapPoint))}),t.ALo(4,"translate"),t.qZA()()}2&U&&(t.xp6(1),t.s9C("pTooltip",t.lcZ(2,2,"global.buttons.edit")),t.xp6(2),t.s9C("pTooltip",t.lcZ(4,4,"global.buttons.delete")))}function ft(U,z){if(1&U&&(t.TgZ(0,"div",17)(1,"span",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",18),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"span",18),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span",18),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,ht,5,6,"div",19),t.qZA()),2&U){const m=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,9,"anchor.name"),": ",m.selectedMapPoint.name," "),t.xp6(3),t.AsE(" ",t.lcZ(6,11,"anchor.x"),": ",m.selectedMapPoint.x," "),t.xp6(3),t.AsE(" ",t.lcZ(9,13,"anchor.y"),": ",m.selectedMapPoint.y," "),t.xp6(3),t.AsE(" ",t.lcZ(12,15,"anchor.z"),": ",m.selectedMapPoint.z," "),t.xp6(2),t.Q6J("ngIf",m.showAnchorOverlayButtons)}}function dt(U,z){if(1&U&&(t.ynx(0),t.YNc(1,ft,14,17,"div",16),t.BQk()),2&U){const m=t.oxw();t.xp6(1),t.Q6J("ngIf",m.selectedMapPoint&&m.showOverlay)}}function pt(U,z){if(1&U&&(t.TgZ(0,"div",17)(1,"span",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",18),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"span",18),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span",18),t._uU(11),t.ALo(12,"translate"),t.ALo(13,"date"),t.qZA()()),2&U){const m=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,8,"localization.tag.name"),": ",m.selectedMapPoint.name," "),t.xp6(3),t.AsE(" ",t.lcZ(6,10,"localization.tag.x"),": ",m.selectedMapPoint.x," "),t.xp6(3),t.AsE(" ",t.lcZ(9,12,"localization.tag.y"),": ",m.selectedMapPoint.y," "),t.xp6(3),t.AsE(" ",t.lcZ(12,14,"localization.tag.date"),": ",t.xi3(13,16,m.selectedMapPoint.date,"yyyy-M-dd, HH:mm:ss")," ")}}function mt(U,z){if(1&U&&(t.ynx(0),t.YNc(1,pt,14,19,"div",16),t.BQk()),2&U){const m=t.oxw();t.xp6(1),t.Q6J("ngIf",m.selectedMapPoint)}}let vt=(()=>{class U extends P.G{constructor(m,M){super(m,M),this.cd=m,this.renderer=M,this.localizations=[],this.selectedAreas=[]}ngOnInit(){}ngOnChanges(m){m.background&&""!==this.background&&this.loadMap(),(m.localizations||m.anchors||m.vertexes)&&(this.localizations.length>0||this.anchors.length>0||this.vertexes.length>0?this.loadPoints(K.u,tt.Q):(this.source.clear(),this.selectedMapPoint=void 0,this.overlay.setPosition(void 0)),this.loadOnMapClickOptions(K.u))}ngOnDestroy(){clearInterval(this.localizationInterval)}loadPoints(m,M){this.loadVertexes(),this.loadAnchors(M),this.localizations.forEach(L=>{const B=this.source.getFeatureById("tag_"+L.tagId);B&&this.source.removeFeature(B);const Z=new V.Z(new Y.Z([L.xPx,L.yPx]));Z.setId(null!==L.tagId?"tag_"+L.tagId:"tag_NEW"),L.tagId===this.selectedMapPoint?.tagId&&(this.selectedMapPoint.x=L.x,this.selectedMapPoint.y=L.y,this.selectedMapPoint.date=L.date,this.overlay.setPosition([L.xPx,L.yPx])),Z.setStyle(new F.ZP({image:new J.Z({src:L.fullPath,scale:.07,anchor:[.5,1]}),zIndex:100})),this.source.addFeature(Z),this.source.changed()})}loadAnchors(m){this.anchors.forEach(M=>{const L=new V.Z(new Y.Z([M.xPx,M.yPx]));L.setId(null!==M.id?"anchor_"+M.id:"anchor_NEW"),L.setStyle(m),this.source.addFeature(L),this.source.changed()})}loadVertexes(){this.clearVertex(),this.vertexes.length>0&&this.selectedAreas.length>0&&(this.selectedAreas.forEach(m=>{const M=new F.ZP({text:new H.Z({text:m?.name,font:"25px Arial",fill:new X.Z({color:m?.color}),stroke:new $.Z({color:"black",width:3})})}),L=[];this.vertexes.filter(D=>D.areaId===m.id).forEach(D=>{const Q=JSON.parse("["+D.x+","+D.y+"]");L.push(Q)});const Z=new V.Z(new et.ZP([L]));Z.setId("area_"+m?.id);const W=new F.ZP({fill:new X.Z({color:m?.color+this.vertexAlfa}),stroke:new $.Z({color:m?.color,width:3})});Z.setStyle([W,M]),this.source.addFeature(Z)}),this.source.changed())}loadOnMapClickOptions(m){this.map.on("click",M=>{if(this.map.getFeaturesAtPixel(M.pixel).length>0){const L=this.map.getFeaturesAtPixel(M.pixel)[0].getId();L.startsWith("tag_")?(this.selectedMapPoint=this.localizations.find(B=>B.tagId===L.split("_")[1]),this.overlayType=_.L.TAG,this.overlay.setPosition(M.coordinate)):L.startsWith("anchor_")?(this.selectedMapPoint=this.anchors.find(B=>B.id===parseInt(L.split("_")[1],10)),this.overlayType=_.L.ANCHOR,this.overlay.setPosition(M.coordinate)):this.overlay.setPosition(void 0),this.cd.detectChanges()}})}}return U.\u0275fac=function(m){return new(m||U)(t.Y36(t.sBO),t.Y36(t.Qsj))},U.\u0275cmp=t.Xpm({type:U,selectors:[["uwb-map-localizations"]],inputs:{localizations:"localizations",selectedAreas:"selectedAreas"},features:[t.qOj,t.TTD],decls:8,vars:7,consts:[[3,"ngSwitch"],[3,"class",4,"ngSwitchCase"],["class","single_map_with_footer",4,"ngSwitchCase"],["id","popup",1,"overlay"],[4,"ngSwitchCase"],["id","map",1,"map"],[1,"single_map_with_footer"],[1,"buttons_container_center"],[4,"ngIf","ngIfElse"],["saveTemplate",""],["class","px-2",3,"disabled","icon","styleClass","label","onClick",4,"ngIf"],[1,"px-2",3,"disabled","icon","styleClass","label","onClick"],["styleClass","ui-button_size_125",1,"px-2",3,"disabled","label","onClick"],["styleClass","ui-button_size_125","type","button","data-dismiss","modal",3,"label","onClick"],[3,"disabledButtons","emitPreviousClick","emitNextClick","emitPlayClick","emitPauseClick","emitTimeToChangePoint",4,"ngIf"],[3,"disabledButtons","emitPreviousClick","emitNextClick","emitPlayClick","emitPauseClick","emitTimeToChangePoint"],["class","flex flex-column",4,"ngIf"],[1,"flex","flex-column"],[1,"p-1"],["class","buttons_container_center",4,"ngIf"],["styleClass","ui-button_size_125","icon","pi pi-pencil",1,"p-2",3,"pTooltip","onClick"],["styleClass","ui-button_size_125","icon","pi pi-times",1,"p-2",3,"pTooltip","onClick"]],template:function(m,M){1&m&&(t.ynx(0,0),t.YNc(1,ot,2,2,"div",1),t.YNc(2,lt,6,2,"div",2),t.YNc(3,ut,3,3,"div",1),t.BQk(),t.TgZ(4,"div",3),t.ynx(5,0),t.YNc(6,dt,2,1,"ng-container",4),t.YNc(7,mt,2,1,"ng-container",4),t.BQk(),t.qZA()),2&m&&(t.Q6J("ngSwitch",M.mapDisplayType),t.xp6(1),t.Q6J("ngSwitchCase","normal"),t.xp6(1),t.Q6J("ngSwitchCase","mapWithButtons"),t.xp6(1),t.Q6J("ngSwitchCase","mapWithBodyInside"),t.xp6(2),t.Q6J("ngSwitch",M.overlayType),t.xp6(1),t.Q6J("ngSwitchCase","anchor"),t.xp6(1),t.Q6J("ngSwitchCase","tag"))},dependencies:[A.u,N.zx,G.O5,G.RF,G.n9,nt.Z,G.uU,q.X$],styles:[".map[_ngcontent-%COMP%]{width:100%;height:100%;border:2px solid var(--uwb-primary);border-radius:15px}  .ol-control{display:flex}  .ol-control button{background-color:var(--uwb-button-background);color:var(--uwb-button-text-color);height:30px;width:30px;border-radius:15px}.overlay[_ngcontent-%COMP%]{background:var(--uwb-background);color:var(--uwb-internal-tab-font-color);border:0 none;border-radius:var(--border-radius);box-shadow:0 1px 3px #0000004d;padding:10px;position:absolute}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}  .ol-zoom{right:.5rem;left:auto}"]}),U})();function gt(U,z){if(1&U&&(t.TgZ(0,"div",12),t._UZ(1,"img",13),t._uU(2),t.qZA()),2&U){const m=z.item;t.s9C("pTooltip",m.name),t.xp6(1),t.Q6J("src",m.path,t.LSH),t.xp6(1),t.hij(" ",m.name," ")}}const bt=[{path:"localizations",component:(()=>{class U{constructor(m,M,L,B,Z,W,D,Q){this.backgroundsService=m,this.objectsService=M,this.localizationsService=L,this.anchorsService=B,this.arrayBufferService=Z,this.authorityService=W,this.areasService=D,this.areaVertexesService=Q,this.backgrounds=[],this.localizations=[],this.objects=[],this.localizationObjects=[],this.anchors=[],this.areas=[],this.areaVertexes=[],this.selectedObjects=[],this.selectedAnchors=[],this.selectedAreas=[],this.selectedAreasVertexes=[],this.destroy$=new a.x}ngOnInit(){this.localizationsService.connect(),this.userOrganizationUnitId=this.authorityService.getUserOrganizationUnitId(),this.loadBackgrounds()}ngOnDestroy(){this.destroy$.closed||(this.destroy$.next(!1),this.destroy$.unsubscribe()),this.localizationsService.unsubscribe(),this.localizationsService.disconnect()}loadBackgrounds(){this.backgroundsService.findAllByUserOrganizationUnit(this.userOrganizationUnitId).subscribe(m=>{this.backgrounds=m.body??[],this.backgrounds.forEach(M=>M.fullPath=this.arrayBufferService.convertImage(M.pathArrayBuffer))})}loadObjects(){this.objectsService.findAllByUserOrganizationUnit(this.selectedBackground?.organizationUnitId).subscribe(m=>{this.objects=m.body??[],this.selectedObjects=this.objects})}loadAnchors(){this.anchorsService.findAllByBackground(this.selectedBackground?.id).subscribe(m=>{this.anchors=m.body??[]})}loadAreas(){this.areasService.findAllByBackground(this.selectedBackground?.id).subscribe(m=>{this.areas=m.body??[]})}loadAreaVertexes(){this.areaVertexesService.findAllByBackground(this.selectedBackground?.id).subscribe(m=>{this.areaVertexes=m.body??[]})}loadLocalizations(){this.localizationsService.subscribe(this.selectedBackground?.id),this.localizationsService.receive().pipe(function p(U){return(0,c.e)((z,m)=>{(0,i.Xf)(U).subscribe((0,n.x)(m,()=>m.complete(),d.Z)),!m.closed&&z.subscribe(m)})}(this.destroy$)).subscribe(m=>{const M=m;this.localizations=[],this.selectedObjects.forEach(L=>{const B=M.find(Z=>Z.tagId===L.hexTagId);B&&this.localizations.push(B)}),this.localizations.forEach(L=>{const B=this.selectedObjects.find(Z=>Z.hexTagId===L.tagId);L.name=B?.name+" "+B?.secondName,L.xPx=this.selectedBackground?.scale?this.selectedBackground?.scale*L.x:L.x,L.yPx=this.selectedBackground?.scale?this.selectedBackground?.scale*L.y:L.y,L.fullPath=this.arrayBufferService.convertImage(L.pathArrayBuffer)})})}onBackgroundSelect(m){this.resetMapOptions(),this.selectedBackground=m,this.selectedBackground?(this.loadLocalizations(),this.loadObjects(),this.loadAnchors(),this.loadAreas(),this.loadAreaVertexes()):this.localizationsService.unsubscribe()}onObjectChange(m){this.selectedObjects=m}onAnchorChange(m){this.selectedAnchors=m}onAreaChange(m){this.selectedAreas=m,this.selectedAreas.forEach(M=>{const L=this.areaVertexes.filter(B=>B.areaId===M.id);this.selectedAreasVertexes=this.selectedAreasVertexes.concat(L)})}resetMapOptions(){this.anchors=[],this.areas=[],this.selectedObjects=[],this.selectedAnchors=[],this.selectedAreas=[]}}return U.\u0275fac=function(m){return new(m||U)(t.Y36(b.s),t.Y36(C.h),t.Y36(T),t.Y36(h.C),t.Y36(v.A),t.Y36(s.g),t.Y36(r.E),t.Y36(y.F))},U.\u0275cmp=t.Xpm({type:U,selectors:[["uwb-localizations"]],decls:19,vars:30,consts:[[1,"single_map_with_navbar"],[1,"grid","align-items-end"],["optionLabel","name",1,"col-11",3,"items","label","itemTemplate","modelChange"],["pTemplate","item"],["itemTemplate",""],[1,"col-1","flex","justify-content-center"],["icon","pi pi-cog",3,"disabled","pTooltip","onClick"],[3,"background","localizations","anchors","selectedAreas","vertexes"],["ol",""],[1,"grid","justify-content-center","align-items-center",2,"width","300px"],["optionLabel","name",1,"col-12","p-0",3,"values","showClear","items","label","emitSelectedOptions"],["optionLabel","name",1,"col-12","p-0",3,"showClear","items","label","emitSelectedOptions"],[1,"flex","align-items-center",3,"pTooltip"],[2,"height","30px",3,"src"]],template:function(m,M){if(1&m){const L=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"uwb-single-select",2),t.NdJ("modelChange",function(Z){return M.onBackgroundSelect(Z)}),t.ALo(3,"translate"),t.YNc(4,gt,3,3,"ng-template",3,4,t.W1O),t.qZA(),t.TgZ(6,"div",5)(7,"p-button",6),t.NdJ("onClick",function(Z){t.CHM(L);const W=t.MAs(11);return t.KtG(W.toogleOverlay(Z))}),t.ALo(8,"translate"),t.qZA()()(),t._UZ(9,"uwb-map-localizations",7),t.qZA(),t.TgZ(10,"uwb-overlay",null,8)(12,"div",9)(13,"uwb-multi-select",10),t.NdJ("emitSelectedOptions",function(Z){return M.onObjectChange(Z)}),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"uwb-multi-select",11),t.NdJ("emitSelectedOptions",function(Z){return M.onAnchorChange(Z)}),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"uwb-multi-select",11),t.NdJ("emitSelectedOptions",function(Z){return M.onAreaChange(Z)}),t.ALo(18,"translate"),t.qZA()()()}if(2&m){const L=t.MAs(5);t.xp6(2),t.s9C("label",t.lcZ(3,20,"localization.backgrounds")),t.Q6J("items",M.backgrounds)("itemTemplate",L),t.xp6(5),t.s9C("pTooltip",t.lcZ(8,22,"localization.details.mapOptions")),t.Q6J("disabled",void 0===M.selectedBackground),t.xp6(2),t.Q6J("background",null==M.selectedBackground?null:M.selectedBackground.fullPath)("localizations",M.localizations)("anchors",M.selectedAnchors)("selectedAreas",M.selectedAreas)("vertexes",M.selectedAreasVertexes),t.xp6(4),t.s9C("label",t.lcZ(14,24,"localization.objects")),t.Q6J("values",M.selectedObjects)("showClear",!1)("items",M.objects),t.xp6(2),t.s9C("label",t.lcZ(16,26,"localization.anchors")),t.Q6J("showClear",!1)("items",M.anchors),t.xp6(2),t.s9C("label",t.lcZ(18,28,"localization.areas")),t.Q6J("showClear",!1)("items",M.areas)}},dependencies:[S.jx,A.u,N.zx,j.g,k.$,R.j,vt,q.X$]}),U})()}];let yt=(()=>{class U{}return U.\u0275fac=function(m){return new(m||U)},U.\u0275mod=t.oAB({type:U}),U.\u0275inj=t.cJS({imports:[f.K,l.m,o.Bz.forChild(bt)]}),U})()},5374:(g,x,e)=>{"use strict";e.d(x,{h:()=>c});var f=e(5032),l=e(7398),o=e(9291),a=e(9862);let c=(()=>{class n{constructor(d){this.http=d,this.resourceUrl=f.T+"uwb-object"}findAll(){return this.http.get(this.resourceUrl,{observe:"response"})}findById(d){return this.http.get(`${this.resourceUrl}/${d}`,{observe:"response"})}findAllByUserOrganizationUnit(d){return this.http.get(`${this.resourceUrl}/user-organization-unit/${d}`,{observe:"response"})}create(d){return this.http.post(this.resourceUrl,d,{observe:"response"})}update(d){return this.http.put(this.resourceUrl,d,{observe:"response"})}delete(d){return this.http.delete(`${this.resourceUrl}/${d}`,{observe:"response",responseType:"text"}).pipe((0,l.U)(p=>p.body))}}return n.\u0275fac=function(d){return new(d||n)(o.LFG(a.eN))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},6698:g=>{g.exports="function"==typeof Object.create?function(e,f){f&&(e.super_=f,e.prototype=Object.create(f.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,f){if(f){e.super_=f;var l=function(){};l.prototype=f.prototype,e.prototype=new l,e.prototype.constructor=e}}},763:(g,x)=>{"use strict";var e=Object.prototype.hasOwnProperty;function l(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch{return null}}function o(n){try{return encodeURIComponent(n)}catch{return null}}x.stringify=function c(n,i){i=i||"";var p,t,d=[];for(t in"string"!=typeof i&&(i="?"),n)if(e.call(n,t)){if(!(p=n[t])&&(null==p||isNaN(p))&&(p=""),t=o(t),p=o(p),null===t||null===p)continue;d.push(t+"="+p)}return d.length?i+d.join("&"):""},x.parse=function a(n){for(var p,i=/([^=?#&]+)=?([^&]*)/g,d={};p=i.exec(n);){var t=l(p[1]),b=l(p[2]);null===t||null===b||t in d||(d[t]=b)}return d}},325:g=>{"use strict";g.exports=function(e,f){if(f=f.split(":")[0],!(e=+e))return!1;switch(f){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},2829:(g,x,e)=>{"use strict";var f=e(7681);g.exports=e(8025)(f),"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)},9841:(g,x,e)=>{"use strict";var f=e(6698),l=e(7003);function o(){l.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}f(o,l),g.exports=o},1e3:(g,x,e)=>{"use strict";var f=e(6698),l=e(3096);function o(){l.call(this)}f(o,l),o.prototype.removeAllListeners=function(a){a?delete this._listeners[a]:this._listeners={}},o.prototype.once=function(a,c){var n=this,i=!1;this.on(a,function d(){n.removeListener(a,d),i||(i=!0,c.apply(this,arguments))})},o.prototype.emit=function(){var c=this._listeners[arguments[0]];if(c){for(var n=arguments.length,i=new Array(n-1),d=1;d<n;d++)i[d-1]=arguments[d];for(var p=0;p<c.length;p++)c[p].apply(this,i)}},o.prototype.on=o.prototype.addListener=l.prototype.addEventListener,o.prototype.removeListener=l.prototype.removeEventListener,g.exports.v=o},7003:g=>{"use strict";function x(e){this.type=e}x.prototype.initEvent=function(e,f,l){return this.type=e,this.bubbles=f,this.cancelable=l,this.timeStamp=+new Date,this},x.prototype.stopPropagation=function(){},x.prototype.preventDefault=function(){},x.CAPTURING_PHASE=1,x.AT_TARGET=2,x.BUBBLING_PHASE=3,g.exports=x},3096:g=>{"use strict";function x(){this._listeners={}}x.prototype.addEventListener=function(e,f){e in this._listeners||(this._listeners[e]=[]);var l=this._listeners[e];-1===l.indexOf(f)&&(l=l.concat([f])),this._listeners[e]=l},x.prototype.removeEventListener=function(e,f){var l=this._listeners[e];if(l){var o=l.indexOf(f);if(-1!==o)return void(l.length>1?this._listeners[e]=l.slice(0,o).concat(l.slice(o+1)):delete this._listeners[e])}},x.prototype.dispatchEvent=function(){var e=arguments[0],f=e.type,l=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+f]&&this["on"+f].apply(this,l),f in this._listeners)for(var o=this._listeners[f],a=0;a<o.length;a++)o[a].apply(this,l)},g.exports=x},8868:(g,x,e)=>{"use strict";var f=e(6698),l=e(7003);function o(a){l.call(this),this.initEvent("message",!1,!1),this.data=a}f(o,l),g.exports=o},3508:(g,x,e)=>{"use strict";var f=e(8257);function l(o){this._transport=o,o.on("message",this._transportMessage.bind(this)),o.on("close",this._transportClose.bind(this))}l.prototype._transportClose=function(o,a){f.postMessage("c",JSON.stringify([o,a]))},l.prototype._transportMessage=function(o){f.postMessage("t",o)},l.prototype._send=function(o){this._transport.send(o)},l.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},g.exports=l},8910:(g,x,e)=>{"use strict";var f=e(7729),l=e(9397),o=e(3508),a=e(9519),c=e(8257),n=e(792);g.exports=function(d,p){var b,t={};p.forEach(function(C){C.facadeTransport&&(t[C.facadeTransport.transportName]=C.facadeTransport)}),t[a.transportName]=a,d.bootstrap_iframe=function(){var C;c.currentWindowId=n.hash.slice(1),l.attachEvent("message",function(O){if(O.source===parent&&(typeof b>"u"&&(b=O.origin),O.origin===b)){var I;try{I=JSON.parse(O.data)}catch{return}if(I.windowId===c.currentWindowId)switch(I.type){case"s":var w;try{w=JSON.parse(I.data)}catch{break}var u=w[0],T=w[1],h=w[2],v=w[3];if(u!==d.version)throw new Error('Incompatible SockJS! Main site uses: "'+u+'", the iframe: "'+d.version+'".');if(!f.isOriginEqual(h,n.href)||!f.isOriginEqual(v,n.href))throw new Error("Can't connect to different domain from within an iframe. ("+n.href+", "+h+", "+v+")");C=new o(new t[T](h,v));break;case"m":C._send(I.data);break;case"c":C&&C._close(),C=null}}}),c.postMessage("s")}}},8597:(g,x,e)=>{"use strict";var f=e(1e3).v,l=e(6698),o=e(6846);function c(n,i){f.call(this);var d=this,p=+new Date;this.xo=new i("GET",n),this.xo.once("finish",function(t,b){var C,E;if(200===t){if(E=+new Date-p,b)try{C=JSON.parse(b)}catch{}o.isObject(C)||(C={})}d.emit("finish",C,E),d.removeAllListeners()})}l(c,f),c.prototype.close=function(){this.removeAllListeners(),this.xo.close()},g.exports=c},9519:(g,x,e)=>{"use strict";var f=e(6698),l=e(1e3).v,o=e(6125),a=e(8597);function c(n){var i=this;l.call(this),this.ir=new a(n,o),this.ir.once("finish",function(d,p){i.ir=null,i.emit("message",JSON.stringify([d,p]))})}f(c,l),c.transportName="iframe-info-receiver",c.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},g.exports=c},7563:(g,x,e)=>{"use strict";var f=e(1e3).v,l=e(6698),o=e(9397),a=e(5750),c=e(9519);function i(d,p){var t=this;f.call(this);var b=function(){var C=t.ifr=new a(c.transportName,p,d);C.once("message",function(E){if(E){var O;try{O=JSON.parse(E)}catch{return t.emit("finish"),void t.close()}t.emit("finish",O[0],O[1])}t.close()}),C.once("close",function(){t.emit("finish"),t.close()})};global.document.body?b():o.attachEvent("load",b)}l(i,f),i.enabled=function(){return a.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},g.exports=i},5231:(g,x,e)=>{"use strict";var f=e(1e3).v,l=e(6698),o=e(7729),a=e(1705),c=e(4225),n=e(6125),i=e(8566),d=e(7563),p=e(8597);function b(C,E){var O=this;f.call(this),setTimeout(function(){O.doXhr(C,E)},0)}l(b,f),b._getReceiver=function(C,E,O){return O.sameOrigin?new p(E,n):c.enabled?new p(E,c):a.enabled&&O.sameScheme?new p(E,a):d.enabled()?new d(C,E):new p(E,i)},b.prototype.doXhr=function(C,E){var O=this,I=o.addPath(C,"/info");this.xo=b._getReceiver(C,I,E),this.timeoutRef=setTimeout(function(){O._cleanup(!1),O.emit("finish")},b.timeout),this.xo.once("finish",function(w,u){O._cleanup(!0),O.emit("finish",w,u)})},b.prototype._cleanup=function(C){clearTimeout(this.timeoutRef),this.timeoutRef=null,!C&&this.xo&&this.xo.close(),this.xo=null},b.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},b.timeout=8e3,g.exports=b},792:g=>{"use strict";g.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},8025:(g,x,e)=>{"use strict";e(7593);var T,f=e(787),l=e(6698),o=e(586),a=e(6267),c=e(7729),n=e(9397),i=e(4815),d=e(6846),p=e(6654),t=e(6045),b=e(7003),C=e(3096),E=e(792),O=e(9841),I=e(8868),w=e(5231);function h(s,r,y){if(!(this instanceof h))return new h(s,r,y);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");C.call(this),this.readyState=h.CONNECTING,this.extensions="",this.protocol="",(y=y||{}).protocols_whitelist&&t.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=y.transports,this._transportOptions=y.transportOptions||{},this._timeout=y.timeout||0;var S=y.sessionId||8;if("function"==typeof S)this._generateSessionId=S;else{if("number"!=typeof S)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return o.string(S)}}this._server=y.server||o.numberString(1e3);var A=new f(s);if(!A.host||!A.protocol)throw new SyntaxError("The URL '"+s+"' is invalid");if(A.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==A.protocol&&"https:"!==A.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+A.protocol+"' is not allowed.");if("https:"===E.protocol&&"https:"!==A.protocol&&!c.isLoopbackAddr(A.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");r?Array.isArray(r)||(r=[r]):r=[];var j=r.sort();j.forEach(function(R,P){if(!R)throw new SyntaxError("The protocols entry '"+R+"' is invalid.");if(P<j.length-1&&R===j[P+1])throw new SyntaxError("The protocols entry '"+R+"' is duplicated.")});var k=c.getOrigin(E.href);this._origin=k?k.toLowerCase():null,A.set("pathname",A.pathname.replace(/\/+$/,"")),this.url=A.href,this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:c.isOriginEqual(this.url,E.href),sameScheme:c.isSchemeEqual(this.url,E.href)},this._ir=new w(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function v(s){return 1e3===s||s>=3e3&&s<=4999}l(h,C),h.prototype.close=function(s,r){if(s&&!v(s))throw new Error("InvalidAccessError: Invalid code");if(r&&r.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==h.CLOSING&&this.readyState!==h.CLOSED&&this._close(s||1e3,r||"Normal closure",!0)},h.prototype.send=function(s){if("string"!=typeof s&&(s=""+s),this.readyState===h.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===h.OPEN&&this._transport.send(a.quote(s))},h.version=e(8085),h.CONNECTING=0,h.OPEN=1,h.CLOSING=2,h.CLOSED=3,h.prototype._receiveInfo=function(s,r){if(this._ir=null,s){this._rto=this.countRTO(r),this._transUrl=s.base_url?s.base_url:this.url,s=d.extend(s,this._urlInfo);var y=T.filterToEnabled(this._transportsWhitelist,s);this._transports=y.main,this._connect()}else this._close(1002,"Cannot connect to server")},h.prototype._connect=function(){for(var s=this._transports.shift();s;s=this._transports.shift()){if(s.needBody&&(!global.document.body||typeof global.document.readyState<"u"&&"complete"!==global.document.readyState&&"interactive"!==global.document.readyState))return this._transports.unshift(s),void n.attachEvent("load",this._connect.bind(this));var r=Math.max(this._timeout,this._rto*s.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),r);var A=new s(c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),this._transUrl,this._transportOptions[s.transportName]);return A.on("message",this._transportMessage.bind(this)),A.once("close",this._transportClose.bind(this)),A.transportName=s.transportName,void(this._transport=A)}this._close(2e3,"All transports failed",!1)},h.prototype._transportTimeout=function(){this.readyState===h.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},h.prototype._transportMessage=function(s){var A,r=this,y=s.slice(0,1),S=s.slice(1);switch(y){case"o":return void this._open();case"h":return void this.dispatchEvent(new b("heartbeat"))}if(S)try{A=JSON.parse(S)}catch{}if(!(typeof A>"u"))switch(y){case"a":Array.isArray(A)&&A.forEach(function(N){r.dispatchEvent(new I(N))});break;case"m":this.dispatchEvent(new I(A));break;case"c":Array.isArray(A)&&2===A.length&&this._close(A[0],A[1],!0)}},h.prototype._transportClose=function(s,r){this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),v(s)||2e3===s||this.readyState!==h.CONNECTING?this._close(s,r):this._connect()},h.prototype._open=function(){this.readyState===h.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=h.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new b("open"))):this._close(1006,"Server lost session")},h.prototype._close=function(s,r,y){var S=!1;if(this._ir&&(S=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===h.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=h.CLOSING,setTimeout(function(){this.readyState=h.CLOSED,S&&this.dispatchEvent(new b("error"));var A=new O("close");A.wasClean=y||!1,A.code=s||1e3,A.reason=r,this.dispatchEvent(A),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},h.prototype.countRTO=function(s){return s>100?4*s:300+s},g.exports=function(s){return T=i(s),e(8910)(h,s),h}},7593:()=>{"use strict";var d,g=Array.prototype,x=Object.prototype,e=Function.prototype,f=String.prototype,l=g.slice,o=x.toString,a=function(s){return"[object Function]"===x.toString.call(s)},n=function(r){return"[object String]"===o.call(r)},i=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}();d=i?function(s,r,y,S){!S&&r in s||Object.defineProperty(s,r,{configurable:!0,enumerable:!1,writable:!0,value:y})}:function(s,r,y,S){!S&&r in s||(s[r]=y)};var p=function(s,r,y){for(var S in r)x.hasOwnProperty.call(r,S)&&d(s,S,r[S],y)},t=function(s){if(null==s)throw new TypeError("can't convert "+s+" to object");return Object(s)};function E(){}p(e,{bind:function(r){var y=this;if(!a(y))throw new TypeError("Function.prototype.bind called on incompatible "+y);for(var S=l.call(arguments,1),N=Math.max(0,y.length-S.length),j=[],k=0;k<N;k++)j.push("$"+k);var R=Function("binder","return function ("+j.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof R){var P=y.apply(this,S.concat(l.call(arguments)));return Object(P)===P?P:this}return y.apply(r,S.concat(l.call(arguments)))});return y.prototype&&(E.prototype=y.prototype,R.prototype=new E,E.prototype=null),R}}),p(Array,{isArray:function(r){return"[object Array]"===o.call(r)}});var r,y,S,O=Object("a"),I="a"!==O[0]||!(0 in O);p(g,{forEach:function(r){var y=t(this),S=I&&n(this)?this.split(""):y,A=arguments[1],N=-1,j=S.length>>>0;if(!a(r))throw new TypeError;for(;++N<j;)N in S&&r.call(A,S[N],N,y)}},(y=!0,S=!0,(r=g.forEach)&&(r.call("foo",function(A,N,j){"object"!=typeof j&&(y=!1)}),r.call([1],function(){S="string"==typeof this},"x")),!(r&&y&&S)));var u=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);p(g,{indexOf:function(r){var y=I&&n(this)?this.split(""):t(this),S=y.length>>>0;if(!S)return-1;var A=0;for(arguments.length>1&&(A=function b(s){var r=+s;return r!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))),r}(arguments[1])),A=A>=0?A:Math.max(0,S+A);A<S;A++)if(A in y&&y[A]===r)return A;return-1}},u);var s,T=f.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(s=void 0===/()??/.exec("")[1],f.split=function(r,y){var S=this;if(void 0===r&&0===y)return[];if("[object RegExp]"!==o.call(r))return T.call(this,r,y);var k,R,P,F,A=[],N=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),j=0;for(r=new RegExp(r.source,N+"g"),S+="",s||(k=new RegExp("^"+r.source+"$(?!\\s)",N)),y=void 0===y?-1>>>0:function C(s){return s>>>0}(y);(R=r.exec(S))&&!((P=R.index+R[0].length)>j&&(A.push(S.slice(j,R.index)),!s&&R.length>1&&R[0].replace(k,function(){for(var J=1;J<arguments.length-2;J++)void 0===arguments[J]&&(R[J]=void 0)}),R.length>1&&R.index<S.length&&g.push.apply(A,R.slice(1)),F=R[0].length,j=P,A.length>=y));)r.lastIndex===R.index&&r.lastIndex++;return j===S.length?(F||!r.test(""))&&A.push(""):A.push(S.slice(j)),A.length>y?A.slice(0,y):A}):"0".split(void 0,0).length&&(f.split=function(r,y){return void 0===r&&0===y?[]:T.call(this,r,y)});var h=f.substr;p(f,{substr:function(r,y){return h.call(this,r<0&&(r=this.length+r)<0?0:r,y)}},"".substr&&"b"!=="0b".substr(-1))},7681:(g,x,e)=>{"use strict";g.exports=[e(228),e(1174),e(7045),e(3831),e(5247)(e(3831)),e(3552),e(5247)(e(3552)),e(6579),e(5244),e(5247)(e(6579)),e(1769)]},9059:(g,x,e)=>{"use strict";var f=e(1e3).v,l=e(6698),o=e(9397),a=e(7729),c=global.XMLHttpRequest;function i(t,b,C,E){var O=this;f.call(this),setTimeout(function(){O._start(t,b,C,E)},0)}l(i,f),i.prototype._start=function(t,b,C,E){var O=this;try{this.xhr=new c}catch{}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();b=a.addQuery(b,"t="+ +new Date),this.unloadRef=o.unloadAdd(function(){O._cleanup(!0)});try{this.xhr.open(t,b,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){O.emit("finish",0,""),O._cleanup(!1)})}catch(w){return this.emit("finish",0,""),void this._cleanup(!1)}if((!E||!E.noCredentials)&&i.supportsCORS&&(this.xhr.withCredentials=!0),E&&E.headers)for(var I in E.headers)this.xhr.setRequestHeader(I,E.headers[I]);this.xhr.onreadystatechange=function(){if(O.xhr){var u,T,w=O.xhr;switch(w.readyState){case 3:try{T=w.status,u=w.responseText}catch{}1223===T&&(T=204),200===T&&u&&u.length>0&&O.emit("chunk",T,u);break;case 4:1223===(T=w.status)&&(T=204),(12005===T||12029===T)&&(T=0),O.emit("finish",T,w.responseText),O._cleanup(!1)}}};try{O.xhr.send(C)}catch{O.emit("finish",0,""),O._cleanup(!1)}},i.prototype._cleanup=function(t){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},i.prototype.close=function(){this._cleanup(!0)},i.enabled=!!c;var d=["Active"].concat("Object").join("X");!i.enabled&&d in global&&(i.enabled=!!new(c=function(){try{return new global[d]("Microsoft.XMLHTTP")}catch{return null}}));var p=!1;try{p="withCredentials"in new c}catch{}i.supportsCORS=p,g.exports=i},5546:g=>{g.exports=global.EventSource},3516:g=>{"use strict";var x=global.WebSocket||global.MozWebSocket;g.exports=x?function(f){return new x(f)}:void 0},3831:(g,x,e)=>{"use strict";var f=e(6698),l=e(6170),o=e(7159),a=e(4225),c=e(5546);function n(i){if(!n.enabled())throw new Error("Transport created when disabled");l.call(this,i,"/eventsource",o,a)}f(n,l),n.enabled=function(){return!!c},n.transportName="eventsource",n.roundTrips=2,g.exports=n},3552:(g,x,e)=>{"use strict";var f=e(6698),l=e(3142),o=e(6125),a=e(6170);function c(n){if(!l.enabled)throw new Error("Transport created when disabled");a.call(this,n,"/htmlfile",l,o)}f(c,a),c.enabled=function(n){return l.enabled&&n.sameOrigin},c.transportName="htmlfile",c.roundTrips=2,g.exports=c},5750:(g,x,e)=>{"use strict";var f=e(6698),l=e(1e3).v,o=e(8085),a=e(7729),c=e(8257),n=e(9397),i=e(586);function p(t,b,C){if(!p.enabled())throw new Error("Transport created when disabled");l.call(this);var E=this;this.origin=a.getOrigin(C),this.baseUrl=C,this.transUrl=b,this.transport=t,this.windowId=i.string(8);var O=a.addPath(C,"/iframe.html")+"#"+this.windowId;this.iframeObj=c.createIframe(O,function(I){E.emit("close",1006,"Unable to load an iframe ("+I+")"),E.close()}),this.onmessageCallback=this._message.bind(this),n.attachEvent("message",this.onmessageCallback)}f(p,l),p.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){n.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},p.prototype._message=function(t){if(a.isOriginEqual(t.origin,this.origin)){var b;try{b=JSON.parse(t.data)}catch{return}if(b.windowId===this.windowId)switch(b.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",b.data);break;case"c":var C;try{C=JSON.parse(b.data)}catch{return}this.emit("close",C[0],C[1]),this.close()}}},p.prototype.postMessage=function(t,b){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:t,data:b||""}),this.origin)},p.prototype.send=function(t){this.postMessage("m",t)},p.enabled=function(){return c.iframeEnabled},p.transportName="iframe",p.roundTrips=2,g.exports=p},1769:(g,x,e)=>{"use strict";var f=e(6698),l=e(4241),o=e(1461),a=e(5658);function c(n){if(!c.enabled())throw new Error("Transport created when disabled");l.call(this,n,"/jsonp",a,o)}f(c,l),c.enabled=function(){return!!global.document},c.transportName="jsonp-polling",c.roundTrips=1,c.needBody=!0,g.exports=c},6170:(g,x,e)=>{"use strict";var f=e(6698),l=e(7729),o=e(4241);function n(i,d,p,t){o.call(this,i,d,function c(i){return function(d,p,t){var b={};"string"==typeof p&&(b.headers={"Content-type":"text/plain"});var C=l.addPath(d,"/xhr_send"),E=new i("POST",C,p,b);return E.once("finish",function(O){if(E=null,200!==O&&204!==O)return t(new Error("http status "+O));t()}),function(){E.close(),E=null;var O=new Error("Aborted");O.code=1e3,t(O)}}}(t),p,t)}f(n,o),g.exports=n},1682:(g,x,e)=>{"use strict";var f=e(6698),l=e(1e3).v;function a(c,n){l.call(this),this.sendBuffer=[],this.sender=n,this.url=c}f(a,l),a.prototype.send=function(c){this.sendBuffer.push(c),this.sendStop||this.sendSchedule()},a.prototype.sendScheduleWait=function(){var n,c=this;this.sendStop=function(){c.sendStop=null,clearTimeout(n)},n=setTimeout(function(){c.sendStop=null,c.sendSchedule()},25)},a.prototype.sendSchedule=function(){var c=this;if(this.sendBuffer.length>0){var n="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,n,function(i){c.sendStop=null,i?(c.emit("close",i.code||1006,"Sending error: "+i),c.close()):c.sendScheduleWait()}),this.sendBuffer=[]}},a.prototype._cleanup=function(){this.removeAllListeners()},a.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},g.exports=a},5247:(g,x,e)=>{"use strict";var f=e(6698),l=e(5750),o=e(6846);g.exports=function(a){function c(n,i){l.call(this,a.transportName,n,i)}return f(c,l),c.enabled=function(n,i){if(!global.document)return!1;var d=o.extend({},i);return d.sameOrigin=!0,a.enabled(d)&&l.enabled()},c.transportName="iframe-"+a.transportName,c.needBody=!0,c.roundTrips=l.roundTrips+a.roundTrips-1,c.facadeTransport=a,c}},1711:(g,x,e)=>{"use strict";var f=e(6698),l=e(1e3).v;function a(c,n,i){l.call(this),this.Receiver=c,this.receiveUrl=n,this.AjaxObject=i,this._scheduleReceiver()}f(a,l),a.prototype._scheduleReceiver=function(){var c=this,n=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);n.on("message",function(i){c.emit("message",i)}),n.once("close",function(i,d){c.poll=n=null,c.pollIsClosing||("network"===d?c._scheduleReceiver():(c.emit("close",i||1006,d),c.removeAllListeners()))})},a.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},g.exports=a},4241:(g,x,e)=>{"use strict";var f=e(6698),l=e(7729),o=e(1682),a=e(1711);function n(i,d,p,t,b){var C=l.addPath(i,d),E=this;o.call(this,i,p),this.poll=new a(t,C,b),this.poll.on("message",function(O){E.emit("message",O)}),this.poll.once("close",function(O,I){E.poll=null,E.emit("close",O,I),E.close()})}f(n,o),n.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},g.exports=n},7159:(g,x,e)=>{"use strict";var f=e(6698),l=e(1e3).v,o=e(5546);function c(n){l.call(this);var i=this,d=this.es=new o(n);d.onmessage=function(p){i.emit("message",decodeURI(p.data))},d.onerror=function(p){var t=2!==d.readyState?"network":"permanent";i._cleanup(),i._close(t)}}f(c,l),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){var n=this.es;n&&(n.onmessage=n.onerror=null,n.close(),this.es=null)},c.prototype._close=function(n){var i=this;setTimeout(function(){i.emit("close",null,n),i.removeAllListeners()},200)},g.exports=c},3142:(g,x,e)=>{"use strict";var f=e(6698),l=e(8257),o=e(7729),a=e(1e3).v,c=e(586);function i(p){a.call(this);var t=this;l.polluteGlobalNamespace(),this.id="a"+c.string(6),p=o.addQuery(p,"c="+decodeURIComponent(l.WPrefix+"."+this.id));var b=i.htmlfileEnabled?l.createHtmlfile:l.createIframe;global[l.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(C){t.emit("message",C)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=b(p,function(){t._cleanup(),t._close("permanent")})}f(i,a),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[l.WPrefix][this.id]},i.prototype._close=function(p){this.emit("close",null,p),this.removeAllListeners()},i.htmlfileEnabled=!1;var d=["Active"].concat("Object").join("X");if(d in global)try{i.htmlfileEnabled=!!new global[d]("htmlfile")}catch{}i.enabled=i.htmlfileEnabled||l.iframeEnabled,g.exports=i},1461:(g,x,e)=>{"use strict";var f=e(8257),l=e(586),o=e(6654),a=e(7729),c=e(6698),n=e(1e3).v;function d(p){var t=this;n.call(this),f.polluteGlobalNamespace(),this.id="a"+l.string(6);var b=a.addQuery(p,"c="+encodeURIComponent(f.WPrefix+"."+this.id));global[f.WPrefix][this.id]=this._callback.bind(this),this._createScript(b),this.timeoutId=setTimeout(function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))},d.timeout)}c(d,n),d.prototype.abort=function(){if(global[f.WPrefix][this.id]){var p=new Error("JSONP user aborted read");p.code=1e3,this._abort(p)}},d.timeout=35e3,d.scriptErrorTimeout=1e3,d.prototype._callback=function(p){this._cleanup(),!this.aborting&&(p&&this.emit("message",p),this.emit("close",null,"network"),this.removeAllListeners())},d.prototype._abort=function(p){this._cleanup(),this.aborting=!0,this.emit("close",p.code,p.message),this.removeAllListeners()},d.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var p=this.script;p.parentNode.removeChild(p),p.onreadystatechange=p.onerror=p.onload=p.onclick=null,this.script=null}delete global[f.WPrefix][this.id]},d.prototype._scriptError=function(){var p=this;this.errorTimer||(this.errorTimer=setTimeout(function(){p.loadedOkay||p._abort(new Error("JSONP script loaded abnormally (onerror)"))},d.scriptErrorTimeout))},d.prototype._createScript=function(p){var C,t=this,b=this.script=global.document.createElement("script");if(b.id="a"+l.string(8),b.src=p,b.type="text/javascript",b.charset="UTF-8",b.onerror=this._scriptError.bind(this),b.onload=function(){t._abort(new Error("JSONP script loaded abnormally (onload)"))},b.onreadystatechange=function(){if(/loaded|closed/.test(b.readyState)){if(b&&b.htmlFor&&b.onclick){t.loadedOkay=!0;try{b.onclick()}catch{}}b&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof b.async>"u"&&global.document.attachEvent)if(o.isOpera())(C=this.script2=global.document.createElement("script")).text="try{var a = document.getElementById('"+b.id+"'); if(a)a.onerror();}catch(x){};",b.async=C.async=!1;else{try{b.htmlFor=b.id,b.event="onclick"}catch{}b.async=!0}typeof b.async<"u"&&(b.async=!0);var E=global.document.getElementsByTagName("head")[0];E.insertBefore(b,E.firstChild),C&&E.insertBefore(C,E.firstChild)},g.exports=d},8051:(g,x,e)=>{"use strict";var f=e(6698),l=e(1e3).v;function a(c,n){l.call(this);var i=this;this.bufferPosition=0,this.xo=new n("POST",c,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(d,p){i._chunkHandler(d,p),i.xo=null,i.emit("close",null,200===d?"network":"permanent"),i._cleanup()})}f(a,l),a.prototype._chunkHandler=function(c,n){if(200===c&&n)for(var i=-1;;this.bufferPosition+=i+1){var d=n.slice(this.bufferPosition);if(-1===(i=d.indexOf("\n")))break;var p=d.slice(0,i);p&&this.emit("message",p)}},a.prototype._cleanup=function(){this.removeAllListeners()},a.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},g.exports=a},5658:(g,x,e)=>{"use strict";var a,c,f=e(586),l=e(7729);g.exports=function(d,p,t){a||function i(){(a=global.document.createElement("form")).style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",(c=global.document.createElement("textarea")).name="d",a.appendChild(c),global.document.body.appendChild(a)}();var b="a"+f.string(8);a.target=b,a.action=l.addQuery(l.addPath(d,"/jsonp_send"),"i="+b);var C=function n(d){try{return global.document.createElement('<iframe name="'+d+'">')}catch{var p=global.document.createElement("iframe");return p.name=d,p}}(b);C.id=b,C.style.display="none",a.appendChild(C);try{c.value=p}catch{}a.submit();var E=function(O){C.onerror&&(C.onreadystatechange=C.onerror=C.onload=null,setTimeout(function(){C.parentNode.removeChild(C),C=null},500),c.value="",t(O))};return C.onerror=function(){E()},C.onload=function(){E()},C.onreadystatechange=function(O){"complete"===C.readyState&&E()},function(){E(new Error("Aborted"))}}},1705:(g,x,e)=>{"use strict";var f=e(1e3).v,l=e(6698),o=e(9397),a=e(6654),c=e(7729);function i(d,p,t){var b=this;f.call(this),setTimeout(function(){b._start(d,p,t)},0)}l(i,f),i.prototype._start=function(d,p,t){var b=this,C=new global.XDomainRequest;p=c.addQuery(p,"t="+ +new Date),C.onerror=function(){b._error()},C.ontimeout=function(){b._error()},C.onprogress=function(){b.emit("chunk",200,C.responseText)},C.onload=function(){b.emit("finish",200,C.responseText),b._cleanup(!1)},this.xdr=C,this.unloadRef=o.unloadAdd(function(){b._cleanup(!0)});try{this.xdr.open(d,p),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(t)}catch{this._error()}},i.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},i.prototype._cleanup=function(d){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,d)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},i.prototype.close=function(){this._cleanup(!0)},i.enabled=!(!global.XDomainRequest||!a.hasDomain()),g.exports=i},4225:(g,x,e)=>{"use strict";var f=e(6698),l=e(9059);function o(a,c,n,i){l.call(this,a,c,n,i)}f(o,l),o.enabled=l.enabled&&l.supportsCORS,g.exports=o},8566:(g,x,e)=>{"use strict";var f=e(1e3).v;function o(){var a=this;f.call(this),this.to=setTimeout(function(){a.emit("finish",200,"{}")},o.timeout)}e(6698)(o,f),o.prototype.close=function(){clearTimeout(this.to)},o.timeout=2e3,g.exports=o},6125:(g,x,e)=>{"use strict";var f=e(6698),l=e(9059);function o(a,c,n){l.call(this,a,c,n,{noCredentials:!0})}f(o,l),o.enabled=l.enabled,g.exports=o},228:(g,x,e)=>{"use strict";var f=e(9397),l=e(7729),o=e(6698),a=e(1e3).v,c=e(3516);function i(d,p,t){if(!i.enabled())throw new Error("Transport created when disabled");a.call(this);var b=this,C=l.addPath(d,"/websocket");C="https"===C.slice(0,5)?"wss"+C.slice(5):"ws"+C.slice(4),this.url=C,this.ws=new c(this.url,[],t),this.ws.onmessage=function(E){b.emit("message",E.data)},this.unloadRef=f.unloadAdd(function(){b.ws.close()}),this.ws.onclose=function(E){b.emit("close",E.code,E.reason),b._cleanup()},this.ws.onerror=function(E){b.emit("close",1006,"WebSocket connection broken"),b._cleanup()}}o(i,a),i.prototype.send=function(d){this.ws.send("["+d+"]")},i.prototype.close=function(){var d=this.ws;this._cleanup(),d&&d.close()},i.prototype._cleanup=function(){var d=this.ws;d&&(d.onmessage=d.onclose=d.onerror=null),f.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},i.enabled=function(){return!!c},i.transportName="websocket",i.roundTrips=2,g.exports=i},5244:(g,x,e)=>{"use strict";var f=e(6698),l=e(6170),o=e(7045),a=e(8051),c=e(1705);function n(i){if(!c.enabled)throw new Error("Transport created when disabled");l.call(this,i,"/xhr",a,c)}f(n,l),n.enabled=o.enabled,n.transportName="xdr-polling",n.roundTrips=2,g.exports=n},7045:(g,x,e)=>{"use strict";var f=e(6698),l=e(6170),o=e(8051),a=e(1705);function c(n){if(!a.enabled)throw new Error("Transport created when disabled");l.call(this,n,"/xhr_streaming",o,a)}f(c,l),c.enabled=function(n){return!n.cookie_needed&&!n.nullOrigin&&a.enabled&&n.sameScheme},c.transportName="xdr-streaming",c.roundTrips=2,g.exports=c},6579:(g,x,e)=>{"use strict";var f=e(6698),l=e(6170),o=e(8051),a=e(4225),c=e(6125);function n(i){if(!c.enabled&&!a.enabled)throw new Error("Transport created when disabled");l.call(this,i,"/xhr",o,a)}f(n,l),n.enabled=function(i){return!i.nullOrigin&&(!(!c.enabled||!i.sameOrigin)||a.enabled)},n.transportName="xhr-polling",n.roundTrips=2,g.exports=n},1174:(g,x,e)=>{"use strict";var f=e(6698),l=e(6170),o=e(8051),a=e(4225),c=e(6125),n=e(6654);function i(d){if(!c.enabled&&!a.enabled)throw new Error("Transport created when disabled");l.call(this,d,"/xhr_streaming",o,a)}f(i,l),i.enabled=function(d){return!d.nullOrigin&&!n.isOpera()&&a.enabled},i.transportName="xhr-streaming",i.roundTrips=2,i.needBody=!!global.document,g.exports=i},2841:g=>{"use strict";g.exports.randomBytes=global.crypto&&global.crypto.getRandomValues?function(x){var e=new Uint8Array(x);return global.crypto.getRandomValues(e),e}:function(x){for(var e=new Array(x),f=0;f<x;f++)e[f]=Math.floor(256*Math.random());return e}},6654:g=>{"use strict";g.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch{return!1}}}},6267:g=>{"use strict";var e,x=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;g.exports={quote:function(l){var o=JSON.stringify(l);return x.lastIndex=0,x.test(o)?(e||(e=function(l){var o,a={},c=[];for(o=0;o<65536;o++)c.push(String.fromCharCode(o));return l.lastIndex=0,c.join("").replace(l,function(n){return a[n]="\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4),""}),l.lastIndex=0,a}(x)),o.replace(x,function(a){return e[a]})):o}}},9397:(g,x,e)=>{"use strict";var f=e(586),l={},o=!1,a=global.chrome&&global.chrome.app&&global.chrome.app.runtime;g.exports={attachEvent:function(n,i){typeof global.addEventListener<"u"?global.addEventListener(n,i,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+n,i),global.attachEvent("on"+n,i))},detachEvent:function(n,i){typeof global.addEventListener<"u"?global.removeEventListener(n,i,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+n,i),global.detachEvent("on"+n,i))},unloadAdd:function(n){if(a)return null;var i=f.string(8);return l[i]=n,o&&setTimeout(this.triggerUnloadCallbacks,0),i},unloadDel:function(n){n in l&&delete l[n]},triggerUnloadCallbacks:function(){for(var n in l)l[n](),delete l[n]}},a||g.exports.attachEvent("unload",function(){o||(o=!0,g.exports.triggerUnloadCallbacks())})},8257:(g,x,e)=>{"use strict";var f=e(9397),l=e(6654);g.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){g.exports.WPrefix in global||(global[g.exports.WPrefix]={})},postMessage:function(a,c){global.parent!==global&&global.parent.postMessage(JSON.stringify({windowId:g.exports.currentWindowId,type:a,data:c||""}),"*")},createIframe:function(a,c){var i,d,n=global.document.createElement("iframe"),p=function(){clearTimeout(i);try{n.onload=null}catch{}n.onerror=null},t=function(){n&&(p(),setTimeout(function(){n&&n.parentNode.removeChild(n),n=null},0),f.unloadDel(d))},b=function(E){n&&(t(),c(E))};return n.src=a,n.style.display="none",n.style.position="absolute",n.onerror=function(){b("onerror")},n.onload=function(){clearTimeout(i),i=setTimeout(function(){b("onload timeout")},2e3)},global.document.body.appendChild(n),i=setTimeout(function(){b("timeout")},15e3),d=f.unloadAdd(t),{post:function(E,O){setTimeout(function(){try{n&&n.contentWindow&&n.contentWindow.postMessage(E,O)}catch{}},0)},cleanup:t,loaded:p}},createHtmlfile:function(a,c){var d,p,t,n=["Active"].concat("Object").join("X"),i=new global[n]("htmlfile"),b=function(){clearTimeout(d),t.onerror=null},C=function(){i&&(b(),f.unloadDel(p),t.parentNode.removeChild(t),t=i=null,CollectGarbage())},E=function(w){i&&(C(),c(w))};i.open(),i.write('<html><script>document.domain="'+global.document.domain+'";<\/script></html>'),i.close(),i.parentWindow[g.exports.WPrefix]=global[g.exports.WPrefix];var I=i.createElement("div");return i.body.appendChild(I),t=i.createElement("iframe"),I.appendChild(t),t.src=a,t.onerror=function(){E("onerror")},d=setTimeout(function(){E("timeout")},15e3),p=f.unloadAdd(C),{post:function(w,u){try{setTimeout(function(){t&&t.contentWindow&&t.contentWindow.postMessage(w,u)},0)}catch{}},cleanup:C,loaded:b}}},g.exports.iframeEnabled=!1,global.document&&(g.exports.iframeEnabled=("function"==typeof global.postMessage||"object"==typeof global.postMessage)&&!l.isKonqueror())},6045:g=>{"use strict";var x={};["log","debug","warn"].forEach(function(e){var f;try{f=global.console&&global.console[e]&&global.console[e].apply}catch{}x[e]=f?function(){return global.console[e].apply(global.console,arguments)}:"log"===e?function(){}:x.log}),g.exports=x},6846:g=>{"use strict";g.exports={isObject:function(x){var e=typeof x;return"function"===e||"object"===e&&!!x},extend:function(x){if(!this.isObject(x))return x;for(var e,f,l=1,o=arguments.length;l<o;l++)for(f in e=arguments[l])Object.prototype.hasOwnProperty.call(e,f)&&(x[f]=e[f]);return x}}},586:(g,x,e)=>{"use strict";var f=e(2841);g.exports={string:function(o){for(var c=f.randomBytes(o),n=[],i=0;i<o;i++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(c[i]%32,1));return n.join("")},number:function(o){return Math.floor(Math.random()*o)},numberString:function(o){var a=(""+(o-1)).length;return(new Array(a+1).join("0")+this.number(o)).slice(-a)}}},4815:g=>{"use strict";g.exports=function(e){return{filterToEnabled:function(f,l){var o={main:[],facade:[]};return f?"string"==typeof f&&(f=[f]):f=[],e.forEach(function(a){if(a){if("websocket"===a.transportName&&!1===l.websocket)return;if(f.length&&-1===f.indexOf(a.transportName))return;a.enabled(l)&&(o.main.push(a),a.facadeTransport&&o.facade.push(a.facadeTransport))}}),o}}}},7729:(g,x,e)=>{"use strict";var f=e(787);g.exports={getOrigin:function(o){if(!o)return null;var a=new f(o);if("file:"===a.protocol)return null;var c=a.port;return c||(c="https:"===a.protocol?"443":"80"),a.protocol+"//"+a.hostname+":"+c},isOriginEqual:function(o,a){return this.getOrigin(o)===this.getOrigin(a)},isSchemeEqual:function(o,a){return o.split(":")[0]===a.split(":")[0]},addPath:function(o,a){var c=o.split("?");return c[0]+a+(c[1]?"?"+c[1]:"")},addQuery:function(o,a){return o+(-1===o.indexOf("?")?"?"+a:"&"+a)},isLoopbackAddr:function(o){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(o)||/^\[::1\]$/.test(o)}}},8085:g=>{g.exports="1.6.1"},787:(g,x,e)=>{"use strict";var f=e(325),l=e(763),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,n=/:\d+$/,i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function p(h){return(h||"").toString().replace(o,"")}var t=[["#","hash"],["?","query"],function(v,s){return E(s.protocol)?v.replace(/\\/g,"/"):v},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],b={hash:1,query:1};function C(h){var v;v=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var S,r={},y=typeof(h=h||v.location||{});if("blob:"===h.protocol)r=new w(unescape(h.pathname),{});else if("string"===y)for(S in r=new w(h,{}),b)delete r[S];else if("object"===y){for(S in h)S in b||(r[S]=h[S]);void 0===r.slashes&&(r.slashes=c.test(h.href))}return r}function E(h){return"file:"===h||"ftp:"===h||"http:"===h||"https:"===h||"ws:"===h||"wss:"===h}function O(h,v){h=(h=p(h)).replace(a,""),v=v||{};var N,s=i.exec(h),r=s[1]?s[1].toLowerCase():"",y=!!s[2],S=!!s[3],A=0;return y?S?(N=s[2]+s[3]+s[4],A=s[2].length+s[3].length):(N=s[2]+s[4],A=s[2].length):S?(N=s[3]+s[4],A=s[3].length):N=s[4],"file:"===r?A>=2&&(N=N.slice(2)):E(r)?N=s[4]:r?y&&(N=N.slice(2)):A>=2&&E(v.protocol)&&(N=s[4]),{protocol:r,slashes:y||E(r),slashesCount:A,rest:N}}function w(h,v,s){if(h=(h=p(h)).replace(a,""),!(this instanceof w))return new w(h,v,s);var r,y,S,A,N,j,k=t.slice(),R=typeof v,P=this,F=0;for("object"!==R&&"string"!==R&&(s=v,v=null),s&&"function"!=typeof s&&(s=l.parse),r=!(y=O(h||"",v=C(v))).protocol&&!y.slashes,P.slashes=y.slashes||r&&v.slashes,P.protocol=y.protocol||v.protocol||"",h=y.rest,("file:"===y.protocol&&(2!==y.slashesCount||d.test(h))||!y.slashes&&(y.protocol||y.slashesCount<2||!E(P.protocol)))&&(k[3]=[/(.*)/,"pathname"]);F<k.length;F++)"function"!=typeof(A=k[F])?(j=A[1],(S=A[0])!=S?P[j]=h:"string"==typeof S?~(N="@"===S?h.lastIndexOf(S):h.indexOf(S))&&("number"==typeof A[2]?(P[j]=h.slice(0,N),h=h.slice(N+A[2])):(P[j]=h.slice(N),h=h.slice(0,N))):(N=S.exec(h))&&(P[j]=N[1],h=h.slice(0,N.index)),P[j]=P[j]||r&&A[3]&&v[j]||"",A[4]&&(P[j]=P[j].toLowerCase())):h=A(h,P);s&&(P.query=s(P.query)),r&&v.slashes&&"/"!==P.pathname.charAt(0)&&(""!==P.pathname||""!==v.pathname)&&(P.pathname=function I(h,v){if(""===h)return v;for(var s=(v||"/").split("/").slice(0,-1).concat(h.split("/")),r=s.length,y=s[r-1],S=!1,A=0;r--;)"."===s[r]?s.splice(r,1):".."===s[r]?(s.splice(r,1),A++):A&&(0===r&&(S=!0),s.splice(r,1),A--);return S&&s.unshift(""),("."===y||".."===y)&&s.push(""),s.join("/")}(P.pathname,v.pathname)),"/"!==P.pathname.charAt(0)&&E(P.protocol)&&(P.pathname="/"+P.pathname),f(P.port,P.protocol)||(P.host=P.hostname,P.port=""),P.username=P.password="",P.auth&&(~(N=P.auth.indexOf(":"))?(P.username=P.auth.slice(0,N),P.username=encodeURIComponent(decodeURIComponent(P.username)),P.password=P.auth.slice(N+1),P.password=encodeURIComponent(decodeURIComponent(P.password))):P.username=encodeURIComponent(decodeURIComponent(P.auth)),P.auth=P.password?P.username+":"+P.password:P.username),P.origin="file:"!==P.protocol&&E(P.protocol)&&P.host?P.protocol+"//"+P.host:"null",P.href=P.toString()}w.prototype={set:function u(h,v,s){var r=this;switch(h){case"query":"string"==typeof v&&v.length&&(v=(s||l.parse)(v)),r[h]=v;break;case"port":r[h]=v,f(v,r.protocol)?v&&(r.host=r.hostname+":"+v):(r.host=r.hostname,r[h]="");break;case"hostname":r[h]=v,r.port&&(v+=":"+r.port),r.host=v;break;case"host":r[h]=v,n.test(v)?(v=v.split(":"),r.port=v.pop(),r.hostname=v.join(":")):(r.hostname=v,r.port="");break;case"protocol":r.protocol=v.toLowerCase(),r.slashes=!s;break;case"pathname":case"hash":if(v){var y="pathname"===h?"/":"#";r[h]=v.charAt(0)!==y?y+v:v}else r[h]=v;break;case"username":case"password":r[h]=encodeURIComponent(v);break;case"auth":var S=v.indexOf(":");~S?(r.username=v.slice(0,S),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=v.slice(S+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(v))}for(var A=0;A<t.length;A++){var N=t[A];N[4]&&(r[N[1]]=r[N[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&E(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function T(h){(!h||"function"!=typeof h)&&(h=l.stringify);var v,s=this,r=s.host,y=s.protocol;y&&":"!==y.charAt(y.length-1)&&(y+=":");var S=y+(s.protocol&&s.slashes||E(s.protocol)?"//":"");return s.username?(S+=s.username,s.password&&(S+=":"+s.password),S+="@"):s.password?(S+=":"+s.password,S+="@"):"file:"!==s.protocol&&E(s.protocol)&&!r&&"/"!==s.pathname&&(S+="@"),(":"===r[r.length-1]||n.test(s.hostname)&&!s.port)&&(r+=":"),S+=r+s.pathname,(v="object"==typeof s.query?h(s.query):s.query)&&(S+="?"!==v.charAt(0)?"?"+v:v),s.hash&&(S+=s.hash),S}},w.extractProtocol=O,w.location=C,w.trimLeft=p,w.qs=l,g.exports=w},8146:function(g){g.exports=function(){"use strict";var x=function(I,w){if(!(I instanceof w))throw new TypeError("Cannot call a class as a function")},e=function(){function I(w,u){for(var T=0;T<u.length;T++){var h=u[T];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(w,h.key,h)}}return function(w,u,T){return u&&I(w.prototype,u),T&&I(w,T),w}}(),f=function(w,u){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return function I(w,u){var T=[],h=!0,v=!1,s=void 0;try{for(var y,r=w[Symbol.iterator]();!(h=(y=r.next()).done)&&(T.push(y.value),!u||T.length!==u);h=!0);}catch(S){v=!0,s=S}finally{try{!h&&r.return&&r.return()}finally{if(v)throw s}}return T}(w,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o={V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.2,1.1,1.0"},supportedProtocols:function(){return["v10.stomp","v11.stomp","v12.stomp"]}},a={"v10.stomp":o.V1_0,"v11.stomp":o.V1_1,"v12.stomp":o.V1_2};var n_LF="\n",n_NULL="\0",i=function(w){return w.replace(/^\s+|\s+$/g,"")};function p(I){var u=String.fromCharCode.apply(String,function(I){if(Array.isArray(I)){for(var w=0,u=Array(I.length);w<I.length;w++)u[w]=I[w];return u}return Array.from(I)}(I)).replace(/(.)/g,function(T,h){var v=h.charCodeAt(0).toString(16).toUpperCase();return v.length<2&&(v="0"+v),"%"+v});return decodeURIComponent(u)}function b(){return(new Date).getTime()+"-"+Math.floor(1e3*Math.random())}var C=function(){function I(w){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";x(this,I),this.command=w,this.headers=u,this.body=T}return e(I,[{key:"toString",value:function(){var u=this,T=[this.command],h=!1===this.headers["content-length"];return h&&delete this.headers["content-length"],Object.keys(this.headers).forEach(function(v){T.push(v+":"+u.headers[v])}),this.body&&!h&&T.push("content-length:"+function t(I){return I?encodeURIComponent(I).match(/%..|./g).length:0}(this.body)),T.push(n_LF+this.body),T.join(n_LF)}}],[{key:"unmarshallSingle",value:function(u){var T=u.search(new RegExp(n_LF+n_LF)),h=u.substring(0,T).split(n_LF),v=h.shift(),s={},r="",y=T+2,S=!0,A=!1,N=void 0;try{for(var k,j=h.reverse()[Symbol.iterator]();!(S=(k=j.next()).done);S=!0){var R=k.value,P=R.indexOf(":");s[i(R.substring(0,P))]=i(R.substring(P+1))}}catch(X){A=!0,N=X}finally{try{!S&&j.return&&j.return()}finally{if(A)throw N}}if(s["content-length"]){var F=parseInt(s["content-length"],10);r=(""+u).substring(y,y+F)}else for(var J=null,H=y;H<u.length&&(J=u.charAt(H))!==n_NULL;H++)r+=J;return new I(v,s,r)}},{key:"unmarshall",value:function(u){var T=u.split(new RegExp(n_NULL+n_LF+"*")),h=T.slice(0,-1),v=T.slice(-1)[0],s={frames:h.map(function(r){return I.unmarshallSingle(r)}),partial:""};return v===n_LF||-1!==v.search(RegExp(n_NULL+n_LF+"*$"))?s.frames.push(I.unmarshallSingle(v)):s.partial=v,s}},{key:"marshall",value:function(u,T,h){return new I(u,T,h).toString()+n_NULL}}]),I}(),E=function(){function I(w){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(this,I);var T=u.binary,h=void 0!==T&&T,v=u.heartbeat,s=void 0===v?{outgoing:1e4,incoming:1e4}:v,r=u.debug,y=void 0===r||r,S=u.protocols,A=void 0===S?[]:S;this.ws=w,this.ws.binaryType="arraybuffer",this.isBinary=!!h,this.hasDebug=!!y,this.connected=!1,this.heartbeat=s||{outgoing:0,incoming:0},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData="",this.protocols=A}return e(I,[{key:"debug",value:function(){var u;this.hasDebug&&(u=console).log.apply(u,arguments)}},{key:"connect",value:function(){var u=this,T=this._parseConnect.apply(this,arguments),h=f(T,3),v=h[0],s=h[1],r=h[2];this.connectCallback=s,this.debug("Opening Web Socket..."),this.ws.onmessage=function(y){var S=y.data;if(y.data instanceof ArrayBuffer&&(S=p(new Uint8Array(y.data))),u.serverActivity=Date.now(),S!==n_LF){u.debug("<<< "+S);var A=C.unmarshall(u.partialData+S);u.partialData=A.partial,A.frames.forEach(function(N){switch(N.command){case"CONNECTED":u.debug("connected to server "+N.headers.server),u.connected=!0,u.version=N.headers.version,u._setupHeartbeat(N.headers),s&&s(N);break;case"MESSAGE":var j=N.headers.subscription,k=u.subscriptions[j]||u.onreceive;if(k){var R=u.version===o.V1_2&&N.headers.ack||N.headers["message-id"];N.ack=u.ack.bind(u,R,j),N.nack=u.nack.bind(u,R,j),k(N)}else u.debug("Unhandled received MESSAGE: "+N);break;case"RECEIPT":u.onreceipt&&u.onreceipt(N);break;case"ERROR":r&&r(N);break;default:u.debug("Unhandled frame: "+N)}})}else u.debug("<<< PONG")},this.ws.onclose=function(y){u.debug("Whoops! Lost connection to "+u.ws.url+":",{event:y}),u._cleanUp(),r&&r(y)},this.ws.onopen=function(){u.debug("Web Socket Opened..."),v["accept-version"]=function c(I,w){var u=a[I];return!u&&w&&w("DEPRECATED: "+I+" is not a recognized STOMP version. In next major client version, this will close the connection."),u||o.V1_2}(u.ws.protocol||u.protocols[0],u.debug.bind(u)),v["heart-beat"]||(v["heart-beat"]=[u.heartbeat.outgoing,u.heartbeat.incoming].join(",")),u._transmit("CONNECT",v)},this.ws.readyState===this.ws.OPEN&&this.ws.onopen()}},{key:"disconnect",value:function(u){this._transmit("DISCONNECT",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.ws.onclose=null,this.ws.close(),this._cleanUp(),u&&u()}},{key:"send",value:function(u){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",v=Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});v.destination=u,this._transmit("SEND",v,T)}},{key:"begin",value:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tx-"+b();return this._transmit("BEGIN",{transaction:u}),{id:u,commit:this.commit.bind(this,u),abort:this.abort.bind(this,u)}}},{key:"commit",value:function(u){this._transmit("COMMIT",{transaction:u})}},{key:"abort",value:function(u){this._transmit("ABORT",{transaction:u})}},{key:"ack",value:function(u,T){var v=Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});v[this.version===o.V1_2?"id":"message-id"]=u,v.subscription=T,this._transmit("ACK",v)}},{key:"nack",value:function(u,T){var v=Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});v[this.version===o.V1_2?"id":"message-id"]=u,v.subscription=T,this._transmit("NACK",v)}},{key:"subscribe",value:function(u,T){var v=Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return v.id||(v.id="sub-"+b()),v.destination=u,this.subscriptions[v.id]=T,this._transmit("SUBSCRIBE",v),{id:v.id,unsubscribe:this.unsubscribe.bind(this,v.id)}}},{key:"unsubscribe",value:function(u){var h=Object.assign({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});delete this.subscriptions[u],h.id=u,this._transmit("UNSUBSCRIBE",h)}},{key:"_cleanUp",value:function(){this.connected=!1,clearInterval(this.pinger),clearInterval(this.ponger)}},{key:"_transmit",value:function(u,T,h){var v=C.marshall(u,T,h);this.debug(">>> "+v,{frame:{command:u,headers:T,body:h}}),this._wsSend(v)}},{key:"_wsSend",value:function(u){for(this.isBinary&&(u=function d(I){var u=encodeURIComponent(I).replace(/%([0-9A-F]{2})/g,function(h,v){return String.fromCharCode("0x"+v)}),T=Array.prototype.map.call(u,function(h){return h.charCodeAt(0)});return new Uint8Array(T)}(u)),this.debug(">>> length "+u.length);;){if(!(u.length>this.maxWebSocketFrameSize))return this.ws.send(u);this.ws.send(u.slice(0,this.maxWebSocketFrameSize)),u=u.slice(this.maxWebSocketFrameSize),this.debug("remaining = "+u.length)}}},{key:"_setupHeartbeat",value:function(u){var T=this;if(this.version===o.V1_1||this.version===o.V1_2){var h=(u["heart-beat"]||"0,0").split(",").map(function(A){return parseInt(A,10)}),v=f(h,2),s=v[0],r=v[1];if(0!==this.heartbeat.outgoing&&0!==r){var y=Math.max(this.heartbeat.outgoing,r);this.debug("send PING every "+y+"ms"),this.pinger=setInterval(function(){T._wsSend(n_LF),T.debug(">>> PING")},y)}if(0!==this.heartbeat.incoming&&0!==s){var S=Math.max(this.heartbeat.incoming,s);this.debug("check PONG every "+S+"ms"),this.ponger=setInterval(function(){var A=Date.now()-T.serverActivity;A>2*S&&(T.debug("did not receive server activity for the last "+A+"ms"),T.ws.close())},S)}}}},{key:"_parseConnect",value:function(){for(var u={},T=void 0,h=void 0,v=arguments.length,s=Array(v),r=0;r<v;r++)s[r]=arguments[r];switch(s.length){case 2:u=s[0],T=s[1];break;case 3:s[1]instanceof Function?(u=s[0],T=s[1],h=s[2]):(u.login=s[0],u.passcode=s[1],T=s[2]);break;case 4:u.login=s[0],u.passcode=s[1],T=s[2],h=s[3];break;default:u.login=s[0],u.passcode=s[1],T=s[2],h=s[3],u.host=s[4]}return[u,T,h]}}]),I}(),O={Frame:C,VERSIONS:o,client:function(w){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=new WebSocket(w,u.protocols||o.supportedProtocols());return new E(T,u)},over:function(){for(var w=arguments.length,u=Array(w),T=0;T<w;T++)u[T]=arguments[T];return new(Function.prototype.bind.apply(E,[null].concat(u)))}};return O}()}}]);